{"version":3,"sources":["Title.js","reducers/StaticData.js","reducers/weight.js","WeightSlider.js","ScrollBarWidth.js","reducers/text_compare.js","reducers/filter.js","reducers/php_lineup.js","reducers/lineup_to_php.js","reducers/mouseover_to_text.js","MyLineup.js","reducers/lineup_filter.js","FilterHeatmap.js","context/DataProvider.js","FilterBoxPlot.js","PCP3.js","php_func.js","PHP.js","MyBoxPlot.js","MetricCard.js","BasicInfo.js","CanvasScatter.js","TextCompare.js","FilterBundling.js","Dashboard.js","Detail.js","TextHeatmap.js","App.js","reducers/index.js","index.js"],"names":["Title","props","console","log","_style","style","_jsx","Typography","Object","assign","fontSize","letterSpacing","component","variant","color","align","marginLeft","marginTop","marginBottom","fontWeight","gutterBottom","children","lang","color_strength","interpolateOranges","idx","d3","interpolatePurples","brown_pink_scale","domain","range","bg_scale","colorScaleList","fixed_lineup_list","fieldList","fieldList_text","colorScaleMap","forEach","field","i","original","original_fra_data","max_LENGTH_DIFF","d","max_TOKEN_LENGTH_DIFF","globalData","map","all_id_list","Array","length","fill","defaultWeight","initalState","weight","isChangeWeight","SAVE_WEIGHT","SAVE_IS_WEIGHT","save_weight_value","data","type","state","arguments","undefined","action","_objectSpread","styled","MuiInput","_templateObject","_taggedTemplateLiteral","WeightSlider","_ref","header","dispatch","useDispatch","useSelector","Box","Slider","defaultValue","size","valueLabelDisplay","onChangeCommitted","event","value","myWeight","saveChangeCommit","step","min","max","ScrollBarWidth","scrollDiv","document","createElement","setAttribute","body","appendChild","scrollbarWidth","offsetWidth","clientWidth","removeChild","text_compare_id","text_compare","rev_filter_info","not_selected_data_id","_toConsumableArray","keys","filter_set","isSavedFiltered","save_rev_filter_info","filter","not_selected_data","filter_list","php_filter_map","column_order","SET_PHP_LINEUP_FILTER","php_linup","mouseover_id","lineup_to_php","text_focus_id","mouseover_to_text","position","top","left","transform","width","bgcolor","border","boxShadow","p","set_column_function","Paper","theme","typography","body2","padding","spacing","textAlign","palette","text","secondary","BodyWrapper","_ref2","ref","rest","_objectWithoutProperties","_excluded","FlipMove","enterAnimation","leaveAnimation","filter_name","filter_num","MyLineup","filter_state","lineup_filter_state","lineup_filter","php_lineup_state","php_lineup","_useState","useState","_useState2","_slicedToArray","select_color","set_select_color","React","useMemo","tbody","field_list_final","_React$useState","_React$useState2","open","setOpen","currentWeight","myColumn","col","scrollBarSize","stackNumColumn","asStackedNumberColumn","Header","maxWidth","showTextLabel","v","col_list","asNumberColumn","accessor","minWidth","text_list","asTextColumn","toLowerCase","replaceAll","format","idColumn","asCategoricalColumn","categories","final_col_list","concat","columns","initialState","id","aesc","_useTable","useTable","useControlledState","rev_id","rev_filter_id","filters","my_filter","key","filter_id_list","filter_id","includes","useFilters","useSortBy","useExpanded","useRowSelect","useRowSelectColumn","useRowRankColumn","useRowExpandColumn","useStats","useResizeColumns","featureFlexLayout","useBlockLayout","useColumnOrder","getTableProps","getTableBodyProps","toggleRowSelected","toggleAllRowsSelected","headerGroups","setFilter","rows","allColumns","prepareRow","setColumnOrder","totalColumnsWidth","selectedFlatRows","_useTable$state","selectedRowIds","sortBy","RenderRow","useCallback","_ref3","index","row","onClick","isSelected","rowSelectedEvent","onMouseOver","e","save_mouseover_id","save_text_focus_id","rank","rowMouseoverEvent","getRowProps","cells","cell","getCellProps","isGrouped","render","isAggregated","selectedIds","push","useEffect","save_text_compare_id","_jsxs","height","float","marginRight","Button","alert","Modal","onClose","sx","margin","CirclePicker","onChangeComplete","hex","TextField","required","label","onChange","target","infos","filter_ids","JSON","parse","stringify","rev_color","currntWeight","name","className","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","getSortByToggleProps","isSorted","isSortedDesc","hasOwnProperty","getResizerProps","FixedSizeList","itemCount","itemSize","save_lineup_filter_id","useStyle","makeStyles","inlineDiv","display","emptyDiv","outerDiv","maxHeight","set_scale_list","Heatmap","classes","svgHeatmap1Ref","useRef","select_rev_id","set_select_rev_id","_useState3","_useState4","remove_candidate_id","set_remove_candiate_id","_useState5","_useState6","fileData","setFileData","_useState7","_useState8","_useState9","_useState10","_useState11","_useState12","heatmap1_field_list","setFieldList","rule_coverage_width","filter_label_width","dataHeight","handleClose","current","selectAll","remove","rev_infos","tmp_svg","scale_list","dimLen","svg","attr","weightWidth","dimWidth","colorScale","axisX","axis_rule_coverage","axis_filter_label","append","axis_height","call","tickSize","g","select","groups","join","Math","trunc","body_group","on","row_id","select_id","label_group","rule_coverage_svg","total_data_length","rule_coverage_scale","weight_group","tool_tip","d3tip","html","parseFloat","show","hide","createChart","english","ENG_SENTENCE","france","FRA_SENTENCE","tsv_string","jsonToTSV","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","__filter","CSVLink","filename","noHeader","interpolateBlues","interpolateGreens","interpolateGreys","original_data","slice","DataProvider","x","y","new_data","Lines","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","args","_key","apply","handleChange","setState","valueChanged","handleSubmit","preventDefault","_createClass","onSubmit","this","Component","PCP","forwardRef","nLines","dragging","dimensions","item","useImperativeHandle","update","lineup","updatePCP","converted_data","newD","count","count_id","obj","counted_list","newJson","widthExtent","transition","duration","path","paths","enter","d2","addr","id_list","window","exit","axis","sort","a","b","each","axisLeft","splitArray","quantileScale","tmp_extent","sampled_data","newValue","myScale","sampled_list","shuffled","random","sqrt","JsonToTable","json","set_field_boxplot","FilterBoxPlot","compute","numberStatsGenerator","myField","setMyField","boxplot_ref","stat","y_max","y_min","tmp_stat","paddingInner","paddingOuter","tickFormat","boxplot_svg","boxWidth","q3","q1","median","filter_info","avg_list","cur_info","tmp_avg_dict","tmp_id","avg_info","avg","valueline","parentNode","datum","brush_dict","preprocess","pivot","nColor","numBin","empty","property","histData","eachHist","k","thresholds","eachHistSep","from","dataLength","selectedLength","x0","reverse","eachHeight","eachWidth","bottomHeight","right","bottom","marginLabelTop","marginLabelBottom","marginBtn","marginIn","translate","DrawHistograms","__data","redrawLines","currentPivot","translateX","order","innerZoomRatio","xScale","kk","yScale","totalWidth","reduce","totalHeight","eachAttr","enterAttr","classed","histAttrs","merge","chartArea","backHover","backHisto","backHistoSmall","foregroundGroup","j","foregroundEach","values","l","nodes","prev","Number","split","pcp_hl","clicked_data","otherAttrs","otherAttr","_brush","extent","selected","selection","yScale_rev","store","yVal","updateData","belowText","ctrlKey","dragMoveEnd","mousePosition","_ref4","dragMove","dragBar","dragZoom","setCallbacks","isLines","column_name","column_list","pcp","lastrq","invalidate","lines","canvas","getElementById","ctx","getContext","clearRect","strokeStyle","lineWidth","globalAlpha","rq","renderQueue","Path2D","stroke","add","canvas_id","clear","lastrq_highlight","func","_queue","_rate","_invalidate","_clear","valid","doFrame","splice","timer_frame","rate","remaining","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","newData","findIndex","checked","newWidth","newScale","PHP","phpList","filter_selected_id","filtered_data","info","filterInfo","mouseover_data","hoverArea","tableHover","pcpdata","rel","href","integrity","crossOrigin","MyBoxPlot","MetricCard","title","toFixed","Card","mb","BasicInfo","dataMap","infoMap","result","arr","sum","maxMinAvg","Grid","container","xs","xl","CanvasScatter","x_option","set_x_option","y_option","set_y_option","splotSvg","divRef","divwidth","divheight","x_min","x_max","createMenuItem","menu_item_list","MenuItem","axis_x","axis_y","context","node","point","beginPath","fillStyle","px","py","arc","PI","drawPoint","mySvg","radius","FormControl","m","InputLabel","Select","labelId","TextCompare","mouse_over_state","option","setOption","listRef","createRef","makeColorString","subjectClass","n_gram","str","token","makeNormalString","scrollToItem","rowList","textList","src_lang","target_lang","e_id","test_data","ngram","ngram_eng_original","back","ngram_eng_back","ngram_fra_original","ngram_fra_back","KOR_SENTENCE","createCard","makeCompareList","src_language","target_language","CardContent","paragraph","Divider","ToggleButtonGroup","exclusive","ToggleButton","class","justifyContent","FilterBundling","diameter","cluster","line","curve","beta","angle","link","bubble","root","find","parent","substring","lastIndexOf","packageHierarchy","bundle","imports","intersection","leaves","bubbleSizeScale","linkStrokeScale","packageImports","tip_link","d3Tip","offset","tip_bubble","sin","cos","Item","metric_explain","Copyright","Date","getFullYear","MetricLegend","metric","background","whiteSpace","Dashboard2","flexGrow","transformOrigin","paddingLeft","backgroundColor","elevation","orientation","flexItem","FilterHeatmap","pt","headerName","DataTable","useParams","newSet","Set","has","eng","set_eng","back_eng","set_back_eng","fra","set_fra","back_fra","set_back_fra","DataGrid","pageSize","rowsPerPageOptions","checkboxSelection","onRowClick","BACK_ENG_SENTENCE","BACK_FRA_SENTENCE","TextHeatmap","svg_heatmap","ngrams","ngram_kor_original","ngram_kor_back","draw","new_svg","eng_original","fill_scale","eng_original_widthScale","pos","eng_back","eng_back_widthScale","App","BrowserRouter","Switch","Route","exact","Dashboard","Detail","rootReducer","combineReducers","enhancer","compose","applyMiddleware","createStore","getState","ReactDOM","Provider"],"mappings":"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","file":"static/js/main.d4be2228.chunk.js","sourcesContent":["import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\n\nfunction Title(props) {\n\tconsole.log(props)\n\tconst _style = props.style ? props.style : {};\n  return (\n    <Typography style={Object.assign(_style, {fontSize:\"1.3em\", letterSpacing: 1})} component=\"h5\" variant=\"h6\" color=\"black\" align=\"left\" marginLeft=\"10px\" marginTop=\"10px\" marginBottom=\"10px\" fontWeight=\"medium\" gutterBottom>\n      {props.children}\n    </Typography>\n  );\n}\n\nTitle.propTypes = {\n  children: PropTypes.node,\n};\n\nexport default Title;\n","\n// import original_fra_data from \"../extractor/1000_slice_ngram.json\"\n// import original_data from \"../extractor/kor_eng_10000.json\"\nimport original_fra_data from \"../extractor/taeri_rev.json\"\nimport original_kor_data from \"../extractor/taeri_rev.json\"\n// import original_data from \"../extractor/50000_full_ngram.json\"\nimport * as d3 from 'd3'\n//import ngram_data from \"../extractor/ngram.json\"\n\n//export let lang = window.location.pathname.slice(1);\nexport let lang = 'KOR'\n\n// invert color scale\n\nconst color_strength = 1.3\n\n\n \nconst interpolateBlues = idx => d3.interpolateBlues(1 - +(idx/color_strength))   \nconst interpolateGreens = idx => d3.interpolateGreens(1 - +(idx/color_strength))   \nconst interpolateGreys = idx => d3.interpolateGreys(1 - +(idx/color_strength))   \nconst interpolateOranges = idx => d3.interpolateOranges(1 - +(idx/color_strength))   \nconst interpolatePurples = idx => d3.interpolatePurples(1 - +(idx/color_strength))   \nconst interpolateReds = idx => d3.interpolateReds(1 - +(idx/color_strength))\nconst brown_pink_scale = d3.scaleLinear().domain([0,1]).range([0.0,0.48])\nconst interpolateBrown = idx => d3.interpolateBrBG(brown_pink_scale(idx/color_strength))\nconst interpolatePink = idx => d3.interpolatePiYG(brown_pink_scale(idx/color_strength))\n\nconst bg_scale = d3.scaleLinear().domain([0,1]).range([1,0.52])\nconst interpolateBrownGreen = idx => d3.interpolateBrBG(bg_scale(idx/ color_strength))\n\nexport const colorScaleList = [interpolateBlues, interpolateGreens, interpolateGreys, interpolateOranges, interpolatePurples\n, interpolateReds, interpolateBrown, interpolatePink, interpolateBrownGreen, interpolateOranges, interpolatePurples]\n\n\nexport const fixed_lineup_list = (lang == \"FRA\") ? ['expand', 'rank', 'selection', \"ENG_SENTENCE\", \"FRA_SENTENCE\", \"Weighted Sum\"]:['expand', 'rank', 'selection', \"ENG_SENTENCE\", \"KOR_SENTENCE\", \"Weighted Sum\"]\n\n// export const fieldList = [\"CORR\", \"BACK_ENG_CORR\", \"BACK_FRA_CORR\", \"LENGTH_DIFF\", \"TOKEN_LENGTH_DIFF\"] \nexport const fieldList = (lang == \"FRA\") ? [\"CORR\", \"BACK_ENG_CORR\", \"BACK_FRA_CORR\", \"ENG_BLEU\", \"FRA_BLEU\", \"ENG_METEOR\", \"FRA_METEOR\", \"LENGTH_DIFF\", \"TOKEN_LENGTH_DIFF\"] \n\t\t\t\t\t\t\t\t:[\"CORR\", \"BACK_ENG_CORR\", \"BACK_KOR_CORR\", \"ENG_BLEU\", \"KOR_BLEU\", \"ENG_METEOR\", \"KOR_METEOR\", \"LENGTH_DIFF\", \"TOKEN_LENGTH_DIFF\"] \n\n\nexport const fieldList_text = {\n\t\"CORR\" : \"Cosine Sim.\",\n\t\"BACK_ENG_CORR\" : \"ENG Cosine Sim.\",\n\t\"BACK_FRA_CORR\" : \"FRA Cosine Sim.\",\n\t\"BACK_KOR_CORR\" : \"KOR Cosine Sim.\",\n\t\"LENGTH_DIFF\" : \"Length Ratio(R)\",\n\t\"TOKEN_LENGTH_DIFF\" : \"Token Length Ratio(R)\",\n\t\"ENG_BLEU\" : \"ENG BLEU\",\n\t\"FRA_BLEU\" : \"FRA BLEU\",\n\t\"KOR_BLEU\" : \"KOR BLEU\",\n\t\"ENG_METEOR\" : \"ENG METEOR\",\n\t\"FRA_METEOR\" : \"FRA METEOR\",\n\t\"KOR_METEOR\" : \"KOR METEOR\"\n}\n\nexport var colorScaleMap = {}\nfieldList.forEach((field,i) => {\n  colorScaleMap[field] = colorScaleList[i]\n})\nvar original = (lang == \"FRA\") ? original_fra_data : original_kor_data\nexport var max_LENGTH_DIFF = d3.max(original, d => d[\"LENGTH_DIFF\"]);\nexport var max_TOKEN_LENGTH_DIFF = d3.max(original, d => d[\"TOKEN_LENGTH_DIFF\"]);\n\nexport var globalData = original.map(d => {\n\td[\"LENGTH_DIFF\"] = 1 - d[\"LENGTH_DIFF\"] / max_LENGTH_DIFF ;\n\td[\"TOKEN_LENGTH_DIFF\"] = 1 - d[\"TOKEN_LENGTH_DIFF\"] / max_TOKEN_LENGTH_DIFF;\n\treturn d;\n})\nexport const all_id_list = Array(globalData.length).fill().map((d,i) => i)\n","\nimport {fieldList} from './StaticData'\n\n\nconst defaultWeight = {}\nfieldList.forEach(d => {\n  console.log(d)\n  defaultWeight[d] = 0.5\n})\nconst initalState = {\n  weight : defaultWeight,\n  isChangeWeight : false,\n};\n\nexport const SAVE_WEIGHT = \"SET_WEIGHT_VALUE\"\nexport const SAVE_IS_WEIGHT = \"SET_IS_CHANGE_WEIGHT\"\nexport const save_weight_value = data => ({ type : SAVE_WEIGHT, data})\nexport const save_is_weight = data => ({ type : SAVE_IS_WEIGHT, data})\n\n\nconst weight = (state = initalState, action) => {\n  switch (action.type) {\n    case SAVE_WEIGHT:\n      return {\n        ...state,\n        weight : action.data\n      }\n    case SAVE_IS_WEIGHT :\n      return {\n        ...state,\n        isChangeWeight : action.data\n      }\n\n    // default    state count undefined  ! default \n    default:\n      return state;\n  }\n};\n\nexport default weight","import React, {useContext, useEffect} from 'react';\nimport { styled } from '@mui/material/styles';\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\nimport Slider from '@mui/material/Slider';\nimport MuiInput from '@mui/material/Input';\nimport VolumeUp from '@mui/icons-material/VolumeUp';\nimport {  useSelector, useDispatch } from \"react-redux\";\nimport {save_weight_value, save_is_weight} from \"./reducers/weight\"\nconst Input = styled(MuiInput)`\n  width: 42px;\n`;\n\nfunction valuetext(value) {\n    return `${value}`;\n  }\n\n  const marks = [\n    {\n      value: 0.0,\n      label: '0.0',\n    },\n    {\n      value: 0.5,\n      label: '0.5',\n    },\n    {\n      value: 1.0,\n      label: '1.0',\n    },\n  ];\n\nexport default function WeightSlider({header}) {\n\n    const dispatch = useDispatch()\n    const state = useSelector(state =>state.weight)\n\n    const saveChangeCommit = (header) => (event, value) => {\n        //const idx = fieldList.indexOf(header)\n        //console.log(state.weight[header])\n        var myWeight = state.weight\n        // console.log(myWeight)\n        myWeight[header] = value\n\t\tconsole.log(value)\n        console.log(myWeight)\n         \n        dispatch(save_weight_value(myWeight))\n        // dispatch(save_is_weight(!state.isChangeWeight))\n        // console.log(state)\n        //dispatch({type : \"SET_IS_CHANGE_WEIGHT\", data : (!state.isChangeWeight)})\n        // console.log(state.weight)\n\n    };\n\n    return (\n        <Box>\n            <Slider\n                defaultValue={0.5}\n                size=\"small\"\n                valueLabelDisplay=\"auto\"\n                onChangeCommitted={saveChangeCommit(header)}\n                step={0.01}\n                min ={0.0}\n                max ={1.0}\n            />\n        </Box>\n    );\n}\n","const ScrollBarWidth = () => {\n    // thanks too https://davidwalsh.name/detect-scrollbar-width\n    const scrollDiv = document.createElement('div')\n    scrollDiv.setAttribute('style', 'width: 100px; height: 100px; overflow: scroll; position:absolute; top:-9999px;')\n    document.body.appendChild(scrollDiv)\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth\n    document.body.removeChild(scrollDiv)\n    return scrollbarWidth\n}\n  \nexport default ScrollBarWidth","\n\nconst initalState = {\n    text_compare_id : [0],\n  };\n  \n  export const TEXT_COMPARE_ID = \"SET_TEXT_COMPARE_ID\"\n \n  export const save_text_compare_id = data => ({ type: TEXT_COMPARE_ID, data })\n\n  \n  const text_compare = (state = initalState, action) => {\n    switch (action.type) {\n        case \"SET_TEXT_COMPARE_ID\" :\n            return {\n              ...state,\n              text_compare_id : action.data\n        }\n      // default    state count undefined  ! default \n      default:\n        return state;\n    }\n  };\n  \n  export default text_compare","\nimport { globalData } from './StaticData'\n\nconst initalState = {\n    rev_filter_info: [],\n\tnot_selected_data_id : [...Array(globalData.length).keys()].map(i => i),\n    filter_set: [],\n\tisSavedFiltered: false\n}\n\nexport const REV_FILTER_INFO = \"SET_REV_FILTER_INFO\"\nexport const FILTER_LIST = \"SET_FILTER_LIST\"\nexport const IS_SAVED_FILTERED = \"SET_IS_SAVED_FILTERED\"\n\nexport const save_rev_filter_info = data => ({ type: REV_FILTER_INFO, data })\nexport const save_filter_list = data => ({ type: FILTER_LIST, data })\nexport const save_is_save_filtered = data => ({ type: IS_SAVED_FILTERED, data })\n\n\nconst filter = (state = initalState, action) => {\n  switch (action.type) {\n    case \"SET_REV_FILTER_INFO\":\n      return {\n        ...state,\n        rev_filter_info: action.data.filter,\n\t\tnot_selected_data_id : action.data.not_selected_data\n      }\n    case \"SET_FILTER_LIST\":\n      return {\n        ...state,\n        filter_list: action.data\n      }\n    case \"SET_IS_SAVED_FILTERED\":\n      return {\n        ...state,\n        isSavedFiltered: action.data\n      }\n\n    // default    state count undefined  ! default \n    default:\n      return state;\n  }\n};\n\nexport default filter","import {fieldList} from './StaticData'\n\nconst initalState = {\n    php_filter_map : null,\n    column_order : fieldList\n  };\n  \n  export const PHP_LINEUP_FILTER = \"SET_PHP_LINEUP_FILTER\"\n    export const COLUMN_ORDER = \"SET_COLUMN_ORDER\"\n\n \n  export const SET_PHP_LINEUP_FILTER = data => ({ type: PHP_LINEUP_FILTER, data })\n  export const save_column_order = data => ({ type: COLUMN_ORDER, data })\n\n  \n  \n  const php_linup = (state = initalState, action) => {\n    switch (action.type) {\n      case \"SET_PHP_LINEUP_FILTER\":\n        return {\n          ...state,\n          php_filter_map: action.data\n        }\n      case \"SET_COLUMN_ORDER\":\n        return {\n          ...state,\n          column_order : action.data\n        }\n  \n      // default    state count undefined  ! default \n      default:\n        return state;\n    }\n  };\n  \n  export default php_linup","\nconst initalState = {\n    mouseover_id : null,\n  };\n  \n  export const MOUSEOVER_ID = \"SET_MOUSEOVER_ID\"\n \n  export const save_mouseover_id = data => ({ type: MOUSEOVER_ID, data })\n\n  \n  \n  const lineup_to_php = (state = initalState, action) => {\n    switch (action.type) {\n  \n      case \"SET_MOUSEOVER_ID\":\n        return {\n          ...state,\n          mouseover_id : action.data\n        }\n\n      // default    state count undefined  ! default \n      default:\n        return state;\n    }\n  };\n  \n  export default lineup_to_php","\n\nconst initalState = {\n    text_focus_id : 0,\n  };\n  \n  export const TEXT_FOCUS_ID = \"SET_TEXT_FOCUS_ID\"\n \n  export const save_text_focus_id = data => ({ type: TEXT_FOCUS_ID, data })\n\n  \n  const mouseover_to_text = (state = initalState, action) => {\n    switch (action.type) {\n        case \"SET_TEXT_FOCUS_ID\" :\n            return {\n              ...state,\n              text_focus_id : action.data\n        }\n      // default    state count undefined  ! default \n      default:\n        return state;\n    }\n  };\n  \n  export default mouseover_to_text","import React, { useContext, useEffect, useState } from 'react';\nimport { useFilters, useTable, useGroupBy, useExpanded, useRowSelect, useSortBy, useResizeColumns, useBlockLayout, useColumnOrder } from 'react-table';\nimport { useRowExpandColumn, useSortingOptions, useRowRankColumn, useRowSelectColumn, useStats, asTextColumn } from '@lineup-lite/hooks';\nimport { TextSummaryRenderer, CategoricalHistogramRenderer, NumberHistogramRenderer } from '@lineup-lite/hooks';\nimport { FixedSizeList } from 'react-window'\nimport LineUpLite, {\n  asNumberColumn,\n  featureRowRank,\n  asStackedNumberColumn,\n  featureFlexLayout,\n  asCategoricalColumn,\n  LineUpLiteColumn,\n  LineUpLiteComponentLike\n} from '@lineup-lite/table'\nimport '@lineup-lite/table/dist/table.css';\nimport \"./css/MyLineup.css\"\nimport { defaultColorScale, defaultConstantColorScale, defaultConstantDarkColorScale, defaultCategoricalColorScale } from '@lineup-lite/components';\n// import { UserDispatch, globalData, fieldList, colorScaleMap } from \"./context/DataProvider\";\nimport Button from '@mui/material/Button';\n//import Slider from '@mui/material/Slider';\nimport FlipMove from 'react-flip-move';\n\nimport WeightSlider from './WeightSlider'\nimport { styled } from '@mui/material/styles';\nimport ScrollBarWidth from './ScrollBarWidth'\nimport Paper from '@mui/material/Paper';\nimport * as d3 from 'd3'\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport { globalData, fieldList, colorScaleMap, colorScaleList, all_id_list, lang, fieldList_text } from './reducers/StaticData'\nimport { save_text_compare_id } from './reducers/text_compare'\nimport { save_rev_filter_info } from './reducers/filter'\nimport { save_column_order } from './reducers/php_lineup'\nimport { save_mouseover_id } from './reducers/lineup_to_php'\nimport { save_text_focus_id } from './reducers/mouseover_to_text'\nimport Title from './Title'\nimport Modal from '@mui/material/Modal';\n\n//import ColorPicker from './ColorPicker'\nimport { CirclePicker } from 'react-color';\nimport TextField from '@mui/material/TextField';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nconst style = {\n  position: 'absolute',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  width: 350,\n  bgcolor: 'background.paper',\n  border: '2px solid #000',\n  boxShadow: 24,\n  p: 4,\n};\n\nconst Item = styled(Paper)(({ theme }) => ({\n  ...theme.typography.body2,\n  padding: theme.spacing(1),\n  textAlign: 'center',\n  color: theme.palette.text.secondary,\n}));\n\nexport var set_column_function = null\n\nconst BodyWrapper = ({\n  children,\n  style,\n  ref,\n  ...rest\n}) => {\n  return (\n    <FlipMove enterAnimation=\"fade\" leaveAnimation=\"fade\" {...rest} ref={ref} style={style}>\n      {children}\n    </FlipMove>\n  );\n};\n\nlet filter_name = \"Label1\"\nlet filter_num = 1;\nfunction MyLineup() {\n  console.log(\"lineup\")\n\n  const dispatch = useDispatch()\n  // const { state, dispatch } = useContext(UserDispatch);\n\n  const state = useSelector(state => state.weight)\n  const filter_state = useSelector(state => state.filter)\n  const lineup_filter_state = useSelector(state => state.lineup_filter)\n\n  const php_lineup_state = useSelector(state => state.php_lineup)\n  const [select_color, set_select_color] = useState(\"#f44336\")\n  const components = React.useMemo(\n    () => ({\n      tbody: BodyWrapper,\n    }),\n    []\n  );\n\n  const data = React.useMemo(() => globalData,\n    [state]\n  );\n\n  var field_list_final = fieldList\n\n  // field_list_final.push.apply(field_list_final, heatmap1_field_list)\n  // field_list_final.push.apply(field_list_final, heatmap2_field_list)\n  const [open, setOpen] = React.useState(false);\n  const handleOpen = () => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  \n  \n\n  const handleColorChange = (color, event) => {\n    console.log(color.hex)\n\n    set_select_color(color.hex)\n  }\n\n  // var {currentWeight} = useSelector(state =>state.weight)\n  var currentWeight = state.weight\n  // console.log(currentWeight)\n  //const currentWeight = state.weight\n  const mycolor = [\"blue\",\"green\",\"grey\",\"orange\",\"purple\",\"red\",\"lightgrey\",\"white\",\"black\"]\n  const myColumn =\n    field_list_final.map((d, i) => {\n      return { col: d, weight: currentWeight[d], color: colorScaleMap[d](0.5) }\n    }\n    )\n\n    \n  // const myColumn = change === true ? field_list_final.map((d, i) => {\n  //   return { col: d, weight: (i + 1), color: defaultConstantColorScale }\n  // })\n  //   : field_list_final.map((d, i) => {\n  //     return { col: d, weight: (1), color: defaultConstantColorScale\n  //     }\n  //   })\n\n  const scrollBarSize = React.useMemo(() => ScrollBarWidth(), [])\n\n\n  const custom_maxWidth = 80\n\n  const stackNumColumn = React.useMemo(() => asStackedNumberColumn({ Header: 'Weighted Sum', width: 110, maxWidth: custom_maxWidth }, myColumn,\n    {\n      min: 0\n    })\n    , [state])\n\n\n  function showTextLabel(v) {\n    return v\n  }\n  const col_list = field_list_final.map((d, i) => asNumberColumn({ accessor: d, Header: fieldList_text[d], minWidth: 10, width: custom_maxWidth }, { color: colorScaleMap[d] }))\n\n  const textFiled = (lang === \"FRA\") ? [\"ENG_SENTENCE\", \"FRA_SENTENCE\"] : [\"ENG_SENTENCE\", \"KOR_SENTENCE\"]\n  const text_list = textFiled.map((d, i) => asTextColumn({ accessor: d, Header: d.toLowerCase().replaceAll(\"_\",\" \"), width: 130 }, { format: showTextLabel }))\n\n  // make category id the size of array\n\n  //const categoriesArr = React.useMemo(() => Array(data.length).fill().map((d, i) => i))\n\n  const idColumn = React.useMemo(() => asCategoricalColumn({ accessor: \"id\", Header: \"ID\" }, { categories: all_id_list }))\n\n  const final_col_list = text_list.concat(idColumn).concat(stackNumColumn).concat(col_list)\n\n  // col_list.push(stackNumColumn)\n  const columns = React.useMemo(\n    () => final_col_list,\n    [state]\n  );\n\n  const initialState = React.useMemo(() =>\n  (\n    {\n      \"sortBy\": [\n        {\n          id: \"Weighted Sum\",\n          aesc: true\n        }\n      ],\n      \"hiddenColumns\": [\n        \"id\"\n      ]\n    }\n  ), [])\n\n  const fixed_column = ['expand', 'rank', 'selection', 'id', \"ENG_SENTENCE\", \"FRA_SENTENCE\", \"Weighted Sum\"]\n\n  // Use the state and functions returned from useTable to build your UI\n  var { getTableProps, getTableBodyProps, toggleRowSelected, toggleAllRowsSelected, setFilter, headerGroups, allColumns, rows, prepareRow, setColumnOrder, totalColumnsWidth, selectedFlatRows, state: { selectedRowIds, sortBy, filters } } = useTable(\n    {\n      columns,\n      data,\n      initialState,\n      useControlledState: state => {\n        return React.useMemo(\n          () => {\n\n            // const my_column_order = fixed_column.concat(php_lineup_state.column_order)\n\n\n            const rev_id = lineup_filter_state.rev_filter_id\n            if (rev_id.length == 0) {\n              console.log(\"REV ID : \" + rev_id)\n              if (php_lineup_state.php_filter_map === null)\n                return { ...state, filters: [] }\n              else {\n                const dict = php_lineup_state.php_filter_map;\n                const my_filter = dict.map(d => { return { id: d.key, value: d.value } })\n\n                return { ...state, filters: my_filter }\n              }\n            }\n            else {\n\t\t\t\tvar filter_list = [].concat(all_id_list)\n\t\t\t\trev_id.forEach(id => {\n\t\t\t\t\tvar filter_id_list = filter_state.rev_filter_info.filter(d => d.id === id)[0]\n\t\t\t\t\tconsole.log(filter_id_list)\n\t\t\t\t\tif(filter_id_list){\n\t\t\t\t\t\tfilter_id_list = filter_id_list.filter_id\n\t\t\t\t\t\tfilter_list = filter_list.filter(d => !filter_id_list.includes(d))\n\t\t\t\t\t}\n\t\t\t\t})\n              return { ...state, filters: [{ id: \"id\", value: filter_list }] }\n            }\n\n            //set_filter_by_id_list(filter_id_list)\n\n            if (php_lineup_state.php_filter_map === null)\n              return { ...state, filters: [] }\n            else {\n              const dict = php_lineup_state.php_filter_map;\n              const key = dict.key\n              const value = dict.value\n              return { ...state, filters: [{ id: key, value: value }] }\n            }\n\n          }\n\n        ,[state,filter_state,lineup_filter_state,php_lineup_state])\n      },\n    },\n    useFilters,\n    useSortBy,\n    useExpanded,\n    useRowSelect,\n    useRowSelectColumn,\n    useRowRankColumn,\n    useRowExpandColumn,\n    useStats,\n    useResizeColumns,\n    featureFlexLayout,\n    useBlockLayout,\n    useColumnOrder\n  );\n\n  set_column_function = setColumnOrder\n\n  // console.log(totalColumnsWidth)\n\n  const sidePanel = () => {\n    var summaryList = []\n    var id_List = []\n    headerGroups.map(headerGroup => {\n      headerGroup.headers.map((column, i) => {\n        if (i > 2) {\n          if (column.Aggregated.name !== \"TextSummaryRenderer\") {\n            // console.log(column)\n            summaryList.push(column.render(\"Summary\"))\n            id_List.push(column.id)\n          }\n        }\n        //console.log(column.render(\"Summary\"))\n      })\n    })\n\n    return (\n      <div style={{ marginTop: 10 }}>\n        {summaryList.map((summary, i) => {\n          return <div>\n            <h3> {id_List[i]} </h3>\n            {summary}\n          </div>\n\n        })}\n\n      </div>\n    )\n  }\n\n\n  const rowSelectedEvent = (row) => {\n    if (row.isSelected)\n      toggleRowSelected(row.id, false)\n    else\n      toggleRowSelected(row.id, true)\n  }\n\n\n  const set_filter_by_id_list = (id_list) => {\n    //const filter_id  = new (id_list)\n    var filter_list = all_id_list.filter(d => !id_list.includes(d))\n    setFilter(\"id\", filter_list)\n  }\n\n  function rowMouseoverEvent(e, row) {\n    dispatch(save_mouseover_id(row.id))\n    dispatch(save_text_focus_id(row.rank))\n    // console.log(\"Mouseover ID : \" +row.id)\n  }\n\n  // Here, we need to update \n  // console.log(rows)\n  // rows.map(d => d.id)\n\n\n  const RenderRow = React.useCallback(\n    ({ index, style }) => {\n      const row = rows[index]\n      prepareRow(row)\n      return (\n        <tr\n          onClick={() => rowSelectedEvent(row)}\n          onMouseOver={(e) => rowMouseoverEvent(e, row)}\n          {...row.getRowProps({\n            style,\n          })}\n        >\n          {row.cells.map(cell => {\n            return (\n              <td {...cell.getCellProps()} >\n                {cell.isGrouped\n                  ? cell.render('Group')\n                  : cell.isAggregated\n                    ? // If the cell is aggregated, use the Aggregated\n                    // renderer for cell\n                    cell.render('Aggregated')\n                    : // Otherwise, just render the regular cell\n                    cell.render('Cell')}\n              </td>\n\n\n\n\n            )\n          })}\n        </tr>\n      )\n    },\n    [prepareRow, rows, selectedRowIds]\n  )\n\n  const selectedIds = selectedFlatRows.map(d => d.original['id'])\n  if (selectedIds.length === 0)\n    selectedIds.push(0)\n  //dispatch({type: \"SET_TEXT_COMPARE_ID\", data:selectedIds})\n\n  // dispatch(save_text_compare_id(selectedIds))\n\n  React.useEffect(() => {\n    dispatch(save_text_compare_id(rows.map(d => d.id)))\n\n  }, [php_lineup_state, state, sortBy, lineup_filter_state])\n\n\n  // React.useEffect(() => {\n  //   console.log(php_lineup_state.php_filter_map)\n  //   if(php_lineup_state.php_filter_map == null)\n  //     return\n  //   const dict = php_lineup_state.php_filter_map;\n  //   const key = dict.key\n  //   const value = dict.value\n\n  //   setFilter(key,value)\n  // },[php_lineup_state])\n\n  const saveFilter = () => {\n\n\n\n    var filter_set = []\n\n    \n\n    selectedFlatRows.forEach(d => {\n      filter_set.push(d.original['id'])\n    })\n\n\n\n    var infos = filter_state.rev_filter_info\n    const length = infos.length\n\n    const filter_ids = JSON.parse(JSON.stringify(filter_set))\n    console.log(filter_set)\n    // console.log(infos[length-1]['id'])\n    var rev_id = 1\n    if (length != 0)\n      rev_id = infos[length - 1].id + 1\n    const rev_color = select_color\n\n    const currntWeight = JSON.parse(JSON.stringify(state.weight))\n\n    const rev_filter_info = { name : filter_name, id: rev_id, rev_color: rev_color, filter_id: filter_ids, weight: currntWeight }\n\n    infos.push(rev_filter_info)\n\n\tvar not_selected_data= filter_state.not_selected_data_id\n\tnot_selected_data= not_selected_data.filter(d => !rev_filter_info.filter_id.includes(d))\n\n    dispatch(save_rev_filter_info({filter: infos, not_selected_data: not_selected_data}))\n    // dispatch({ type: \"SET_SAVE_FILTER_ADDED\", data: (!state.isSavedFiltered) })\n    setOpen(false)\n\ttoggleAllRowsSelected(false)\n\tfilter_num++;\n\tfilter_name = \"Label\" + filter_num\n    \n  }\n\n  function seeDetail() {\n    const selectedIds = selectedFlatRows.map(d => d.original['id'])\n    //console.log(seletedIds)\n    const addr = \"detail2/\" + selectedIds\n    window.open(addr, '_blank')\n\n  }\n\n  // const [filter_name, set_filter_name] = useState(\"Label\")\n\n  const handleFilterName = (e) => {\n    filter_name = (e.target.value)\n    console.log(e.target.value)\n  }\n\n  // Render the UI for your table\n  return (\n    <div>\n\t\t<div style={{height:70}}>\n      <Title style={{float:\"left\"}}> Ranking View\n      </Title>\n\t  {/* component=\"h5\" variant=\"h6\" color=\"black\"  fontWeight=\"medium\" gutterBottom */}\n\t  \t{/* <Typography style={{ fontSize: \"1em\", float: \"left\" }} variant=\"body1\" > */}\n\t\t<Typography style={{fontSize:\"1em\", float:\"left\"}} variant=\"body1\" marginLeft=\"50px\" marginTop=\"20px\">\n\t\t\t# of Brushed Item : {rows.length}\n        </Typography>\n        <div style={{float:\"right\", marginTop: 20, marginRight:20}}>\n        <Button color=\"inherit\" variant=\"contained\" size=\"small\" onClick={() => {\n// 'inherit' | 'primary' | 'secondary' | 'success' | 'error' | 'info' | 'warning',\n            if(selectedFlatRows.length <=0)\n            {\n              alert(\"No item is Selected!\")\n              return\n            }\n\n          setOpen(true)\n        }}>Save Ruleset</Button>\n        </div>\n\t  </div>\n      <Modal\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\"\n      >\n\n        <div>\n          {/* <Button variant=\"contained\" onClick={handleOpen}>Open modal</Button> */}\n\n          <Box sx={style}>\n            <Typography variant=\"h6\" component=\"div\">\n              Save Ruleset Infomation\n            </Typography>\n            <br />\n\n            <div style={{ margin: 10 }}>\n\n              <CirclePicker color={select_color} onChangeComplete={handleColorChange} />\n\n            </div>\n            <div style={{ marginTop: 35, marginLeft: 23 }}>\n              <TextField\n                required\n                id=\"outlined-required\"\n                label={filter_name}\n                defaultValue={filter_name}\n                onChange={handleFilterName}\n              />\n            </div>\n\n            <div style={{ textAlign: \"right\", marginTop: 30 }}>\n              <Button variant=\"contained\" onClick={saveFilter}>Save</Button>\n            </div>\n          </Box>\n        </div>\n\n      </Modal>\n\n\n      <div id=\"myLineup\" className=\"tableWrap\" style={{marginTop: 20}}>\n        <table {...getTableProps()} style={{margin:\"auto\"}} >\n          <thead>\n            {headerGroups.map((headerGroup) => (\n              <tr {...headerGroup.getHeaderGroupProps()} >\n                {headerGroup.headers.map((column, i) => (\n                  <th style={{fontSize:\"0.6em\"}} {...column.getHeaderProps(column.getSortByToggleProps())}>\n                    {column.render(\"Header\")}\n                    <span>\n                      {i > 4 ? column.isSorted\n                        ? column.isSortedDesc\n                          ? ' '\n                          : ' '\n                        : '' : ''}\n                    </span>\n                    {column.hasOwnProperty(\"getResizerProps\") ?\n                      <div {...column.getResizerProps()}\n                        className=\"resizer\" /> : \"\"\n                    }\n\n\n                  </th>\n                ))}\n              </tr>\n            ))}\n\n\n            {headerGroups.map((headerGroup) => (\n              <tr {...headerGroup.getHeaderGroupProps()}>\n                {headerGroup.headers.map((column, i) => (\n                  <th {...column.getHeaderProps()}>\n                    {i > 5 ? <WeightSlider header={column.id}/> : ''}\n                  </th>\n                ))}\n              </tr>\n\n            ))}\n          </thead>\n          <tbody {...getTableBodyProps()}>\n            <FixedSizeList\n              height={500}\n              itemCount={rows.length}\n              itemSize={35}\n              width={totalColumnsWidth + scrollBarSize}\n            >\n              {RenderRow}\n            </FixedSizeList>\n          </tbody>\n        </table>\n\n\n      </div>\n    </div>\n\n\n  );\n}\n\nexport default MyLineup;","\n\nconst initalState = {\n  rev_filter_id : []\n};\n\nexport const LINEUP_FILTER_ID = \"SET_LINEUP_FILTER_ID\"\n\n\nexport const save_lineup_filter_id = data => ({ type: LINEUP_FILTER_ID, data })\n\n\n\nconst lineup_filter = (state = initalState, action) => {\n  switch (action.type) {\n    case \"SET_LINEUP_FILTER_ID\":\n      return {\n        ...state,\n        rev_filter_id: action.data\n      }\n\n    // default    state count undefined  ! default \n    default:\n      return state;\n  }\n};\n\nexport default lineup_filter","import React, { useEffect, useRef, useState, useContext } from 'react'\nimport * as d3 from 'd3'\nimport d3tip from 'd3-tip'\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport \"./css/FilterHeatmap.css\"\nimport Title from './Title'\nimport { CSVLink, CSVDownload } from \"react-csv\";\n// import { UserDispatch, globalData, fieldList, colorScaleMap } from \"./context/DataProvider\";\n\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { globalData, fieldList, colorScaleMap, fieldList_text } from './reducers/StaticData'\nimport { save_lineup_filter_id } from './reducers/lineup_filter'\nimport { save_rev_filter_info } from './reducers/filter'\n\n//import diff_data from './diff.json'\n//import Papa from papaparse\n\n\nconst useStyle = makeStyles((theme) => ({\n\tinlineDiv: {\n\t\tdisplay: \"inline-block\",\n\t},\n\n\temptyDiv: {\n\t\tdisplay: \"inline-block\",\n\t\twidth: \"30px\"\n\t},\n\n\touterDiv: {\n\t\tdisplay: \"inline-block\",\n\t\tmaxHeight: \"800px\",\n\n\t}\n\n}))\n\nexport var set_scale_list = null\n\n\nfunction Heatmap() {\n\n\tconst classes = useStyle();\n\tconst svgHeatmap1Ref = useRef()\n\tconst svgHeatmap2Ref = useRef()\n\n\tconst dispatch = useDispatch()\n\tconst state = useSelector(state => state.filter)\n\tconst [select_rev_id, set_select_rev_id] = useState([])\n\tconst [remove_candidate_id, set_remove_candiate_id] = useState(null)\n\tconst [fileData, setFileData] = useState(\"\");\n\t//const lineup_filter_state = useSelector(state => state.lineup_filter)\n\n\tvar rev_infos = state.rev_filter_info\n\n\tconst margin = { top: 30, right: 30, bottom: 30, left: 30 }\n\n\tconst [sorting, setSorting] = useState(\"\")\n\tconst [open, setOpen] = useState(false)\n\tconst [heatmap1_field_list, setFieldList] = useState(fieldList)\n\tset_scale_list = setFieldList\n\n\tconst rule_coverage_width = 40\n\tconst filter_label_width = 70\n\tconst remove_width = 30\n\tconst axis_height = 50\n\tconst axis_top_margin = 50\n\tconst dataHeight = 20\n\n\tconst handleClickOpen = () => {\n\t\tsetOpen(true);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetOpen(false);\n\t};\n\n\tconst handleRemoveFilter = () => {\n\t\tsetOpen(false);\n\t\tconsole.log(\"Remove candidate id : \" + remove_candidate_id)\n\t\tconst rev_filter_info = state.rev_filter_info.filter(d => d.id !== remove_candidate_id)\n\n\t\tvar not_selected_data = state.not_selected_data_id\n\t\tnot_selected_data = [...Array(globalData.length).keys()].map(i => i)\n\t\trev_filter_info.forEach(__filter => {\n\t\t\tnot_selected_data = not_selected_data.filter(d => !__filter.filter_id.includes(d))\n\t\t})\n\t\tdispatch(save_rev_filter_info({ filter: rev_filter_info, not_selected_data: not_selected_data }))\n\t\tset_select_rev_id(select_rev_id.filter(id => id !== remove_candidate_id))\n\t\tdispatch(save_lineup_filter_id(select_rev_id.filter(id => id !== remove_candidate_id)))\n\t}\n\n\tuseEffect(() => {\n\t\tconsole.log(\"Heatmap use effect\")\n\t\td3.select(svgHeatmap1Ref.current).selectAll(\"*\").remove()\n\n\t\tconst createChart = (tmp_svg, data, scale_list, width, height) => {\n\n\t\t\tlet dataLen = data.length;\n\t\t\tlet dimLen = scale_list.length // -1 means excluding id\n\n\t\t\tconst scaleHeight = 30;\n\n\n\n\t\t\tconst margin = { top: 30, right: 30, bottom: 30, left: 30 }\n\t\t\tlet svg = d3.select(tmp_svg.current)\n\t\t\tsvg.attr(\"width\", width).attr(\"height\", height)\n\n\n\t\t\t// weightWidth = totalWidth - each margin - flter_label_width - each margin - numbre_width\n\n\t\t\tconst weightWidth = width - 10 - rule_coverage_width - filter_label_width - 10 - remove_width\n\n\t\t\tlet dimWidth = weightWidth / dimLen;\n\n\t\t\tconst colorScale = d3.scaleLinear().domain([0, 1]).range([0, 1])\n\t\t\tvar axisX = d3.scaleBand().range([0, weightWidth]).domain(scale_list.map(d => fieldList_text[d])).padding(0.01)\n\t\t\tvar axis_rule_coverage = d3.scaleBand().range([0, filter_label_width]).domain([\"# of item\"]).padding(0.01)\n\t\t\tvar axis_filter_label = d3.scaleBand().range([0, filter_label_width]).domain([\"Filter Label\"]).padding(0.01)\n\n\t\t\t// Create Label\n\n\t\t\t// Filter Coverage\n\t\t\tsvg.append(\"g\").attr(\"class\", \"xaxis axis\").attr(\"transform\", `translate(0, ${axis_height - 5})`).call(d3.axisTop(axis_filter_label).tickSize(0)).call(g => g.select(\".domain\").remove())\n\n\t\t\t// Rule Coverage\n\t\t\tsvg.append(\"g\").attr(\"class\", \"xaxis axis\").attr(\"transform\", `translate(${filter_label_width + 10}, ${axis_height - 5})`).call(d3.axisTop(axis_rule_coverage).tickSize(0)).call(g => g.select(\".domain\").remove())\n\n\t\t\t// Filter Label\n\t\t\tconst filter_label_svg = svg.append(\"g\").attr(\"class\", \"xaxis axis\").attr(\"transform\", `translate(${rule_coverage_width + 10 + filter_label_width + 30}, ${axis_height})`).call(d3.axisTop(axisX).tickSize(0)).call(g => g.select(\".domain\").remove())\n\n\t\t\t// const axisSvg = svg.append(\"g\").attr(\"class\",\"xaxis axis\").attr(\"transform\", `translate(${rule_coverage_width + 10 + filter_label_width+10}, ${axis_height - 5})`).call(d3.axisTop(axisX).tickSize(0)).call(g => g.select(\".domain\").remove())\n\n\n\t\t\tsvg.selectAll(\".xaxis text\").attr(\"transform\", function (d) {\n\t\t\t\treturn \"rotate(-70)\";\n\t\t\t})\n\n\t\t\tvar newSvg = svg.append(\"g\").attr(\"transform\", `translate(0,${axis_height + axis_top_margin})`)\n\n\t\t\t// svg.append(\"rect\").attr(\"width\", filter_label_width).attr(\"height\",dataHeight).attr(fill, data[\"rev_color\"])\n\t\t\t// svg = svg.append(\"g\").attr(\"transform\", `translate(0, ${filter_label_width + 10})`)\n\t\t\tvar groups = newSvg\n\t\t\t\t.selectAll(\"g.row\")\n\t\t\t\t.data(data, (d) => {\n\t\t\t\t\treturn d.id\n\t\t\t\t})\n\t\t\t\t.join(\"g\")\n\t\t\t\t.attr(\"transform\", (d, i) => {\n\t\t\t\t\tconst y_pos = Math.trunc(i);\n\t\t\t\t\tconst pos = i * dataHeight;\n\t\t\t\t\treturn `translate(0,${pos})`\n\t\t\t\t}\n\t\t\t\t)\n\t\t\tvar body_group = groups.append(\"g\")\n\t\t\t\t.style(\"cursor\", \"pointer\")\n\t\t\t\t.on(\"mouseover\", (event, d) => {\n\t\t\t\t\tconst row_id = \"#row_\" + d.id\n\t\t\t\t\tif (!select_rev_id.includes(d.id))\n\t\t\t\t\t\tsvg.selectAll(row_id).style(\"stroke\", \"lightgrey\").style(\"stroke-width\", 4)\n\t\t\t\t}).on(\"mouseout\", function (event, d) {\n\t\t\t\t\tif (!select_rev_id.includes(d.id)) {\n\t\t\t\t\t\tconst row_id = \"#row_\" + d.id\n\t\t\t\t\t\tsvg.selectAll(row_id).style(\"stroke\", \"none\").style(\"stroke-width\", 0)\n\t\t\t\t\t}\n\n\t\t\t\t}).on(\"click\", (event, d) => {\n\t\t\t\t\t// console.log(\"SELECTE REV ID : \" + select_rev_id)\n\t\t\t\t\t// console.log(\"d.id : \" + d.id)\n\t\t\t\t\tif (select_rev_id.includes(d.id)) {\n\t\t\t\t\t\t// console.log(\"SAME ID\")\n\t\t\t\t\t\tset_select_rev_id(select_rev_id.filter(id => id !== d.id))\n\t\t\t\t\t\tdispatch(save_lineup_filter_id(select_rev_id.filter(id => id !== d.id)))\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// console.log(\"HERE\")\n\t\t\t\t\t\tconst row_id = \"#row_\" + d.id\n\t\t\t\t\t\tlet select_id = [].concat(select_rev_id);\n\t\t\t\t\t\tselect_id.push(d.id);\n\t\t\t\t\t\tconsole.log(select_id)\n\t\t\t\t\t\tset_select_rev_id(select_id)\n\t\t\t\t\t\tdispatch(save_lineup_filter_id(select_id))\n\t\t\t\t\t\tsvg.selectAll(row_id).style(\"stroke\", \"red\").style(\"stroke-width\", 4)\n\t\t\t\t\t}\n\t\t\t\t})\n\n\n\t\t\tconst label_group = body_group.append(\"g\").attr(\"transform\", (d, i) => {\n\t\t\t\treturn `translate(0 , 0)`\n\t\t\t})\n\n\t\t\tlabel_group.append(\"rect\").attr(\"width\", filter_label_width)\n\t\t\t\t.attr(\"height\", dataHeight).attr(\"fill\", d => {\n\t\t\t\t\treturn d.rev_color\n\t\t\t\t})\n\n\n\n\t\t\tlabel_group.append(\"text\").text((d, i) => { return d.name })\n\t\t\t\t.attr(\"x\", (d, i) => { return 5 }).attr(\"y\", (d, i) => { return dataHeight / 1.5 }).attr(\"font-size\", \"0.8em\").attr(\"fill\", \"white\")\n\n\t\t\t// Rule coverage \n\n\n\t\t\tconst rule_coverage_svg = body_group.append(\"g\").attr(\"transform\", (d, i) => {\n\t\t\t\treturn `translate(${filter_label_width + 10},0)`\n\t\t\t})\n\n\n\t\t\t// Rule coverage  \n\t\t\t// Rule Coverage First Width : rule_coverage_widt h - d.filter_id.length\n\t\t\t// Rule Coverage rest of them\n\t\t\tconst total_data_length = globalData.length\n\t\t\tconst rule_coverage_scale = d3.scaleLinear().range([0, rule_coverage_width]).domain([0, total_data_length])\n\n\t\t\trule_coverage_svg.append(\"rect\").attr(\"id\", (d, i) => \"rule_coverage_\" + i).attr(\"width\", rule_coverage_width).attr(\"height\", dataHeight).style(\"fill\", \"none\").style(\"stroke\", \"grey\").style(\"stroke-width\", 1)\n\t\t\trule_coverage_svg.append(\"rect\").attr(\"width\", (d, i) => {\n\t\t\t\treturn rule_coverage_scale(d.filter_id.length)\n\t\t\t}).style(\"fill\", \"gray\")\n\n\n\t\t\t\t.attr(\"height\", dataHeight).attr(\"fill\", d => {\n\t\t\t\t\treturn d.rev_color\n\t\t\t\t})\n\n\n\t\t\trule_coverage_svg.append(\"text\").text((d, i) => { return d.filter_id.length })\n\t\t\t\t.attr(\"x\", (d, i) => { return rule_coverage_width / 4 }).attr(\"y\", (d, i) => { return dataHeight / 1.5 }).attr(\"font-size\", \"0.8em\").attr(\"fill\", \"black\")\n\n\n\n\n\n\n\t\t\tconst weight_group = body_group.append(\"g\").attr(\"transform\", (d, i) => {\n\t\t\t\treturn `translate(${rule_coverage_width + 10 + filter_label_width + 10},0)`\n\t\t\t})\n\n\t\t\td3.selectAll(\".tip-info\").remove()\n\t\t\tvar tool_tip = d3tip()\n\t\t\ttool_tip.attr(\"class\", \"d3-tip tip-info\").html(function (e, d) {\n\t\t\t\ttool_tip.style(\"margin-left\", (parseFloat((d3.select(\".tip-info\").style(\"left\"))) - 960) / 4 + \"px\")\n\t\t\t\ttool_tip.style(\"margin-top\", parseFloat((d3.select(\".tip-info\").style(\"top\"))) / 4 + \"px\")\n\t\t\t\treturn d\n\t\t\t})\n\t\t\tsvg.call(tool_tip)\n\n\t\t\tweight_group.selectAll(\"rect\").data((d, i) => {\n\t\t\t\t// console.log(d)\n\t\t\t\t// console.log(d.val)\n\t\t\t\tconst weightList = heatmap1_field_list.map(field => d['weight'][field])\n\t\t\t\treturn weightList\n\t\t\t}).join(\"rect\").attr(\"x\", (d, i) => {\n\t\t\t\t//console.log(i)\n\t\t\t\t//const key = mapping[i]\n\t\t\t\tconst x_pos = i % dimLen\n\t\t\t\treturn x_pos * dimWidth\n\t\t\t}).attr(\"y\", (d, i) => {\n\t\t\t\tconst y_pos = Math.trunc(i / dimLen);\n\t\t\t\treturn y_pos * dataHeight;\n\t\t\t})\n\t\t\t\t.attr(\"width\", dimWidth)\n\t\t\t\t.attr('height', dataHeight).attr('stroke', 'gray')\n\t\t\t\t.attr(\"fill\", (d, i) => {\n\t\t\t\t\treturn d3.interpolateGreens(colorScale(d))\n\t\t\t\t})\n\t\t\t\t.on(\"mouseover\", tool_tip.show)\n\t\t\t\t.on(\"mouseout\", tool_tip.hide)\n\n\n\t\t\tconst remove_group = groups.append(\"g\").attr(\"transform\", (d, i) => {\n\t\t\t\treturn `translate(${width - remove_width},0)`\n\t\t\t})\n\t\t\tconst x_button = remove_group.append(\"image\").attr(\"href\", \"X.svg\").attr(\"x\", 8).attr(\"y\", 3).attr(\"height\", 14).attr(\"width\", 14).style(\"cursor\", \"pointer\")\n\t\t\tx_button.on(\"click\", (event, d) => {\n\t\t\t\tset_remove_candiate_id(d.id)\n\t\t\t\tsetOpen(true)\n\t\t\t})\n\t\t\t\t.on(\"mouseover\", (event, d) => {\n\t\t\t\t\td3.select(event.target).style(\"outline\", \"auto\").style(\"outline-color\", \"silver\")\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\", (event, d) => {\n\t\t\t\t\td3.select(event.target).style(\"outline\", \"none\")\n\t\t\t\t})\n\n\t\t\tconst row = groups.append(\"rect\").attr(\"id\", (d, i) => \"row_\" + d.id)\n\t\t\t\t.attr(\"width\", width - remove_width).attr(\"height\", dataHeight).attr(\"fill\", 'none')\n\t\t\t\t.style(\"stroke\", d => select_rev_id.includes(d.id) ? \"red\" : \"none\").style(\"stroke-width\", 4)\n\t\t}\n\n\t\tconst rev_infos = state.rev_filter_info\n\t\tcreateChart(svgHeatmap1Ref, rev_infos, heatmap1_field_list, 270, 260)\n\n\t\tvar english = state.not_selected_data_id.map(d => {\n\t\t\treturn globalData[d].ENG_SENTENCE\n\t\t})\n\t\tvar france = state.not_selected_data_id.map(d => {\n\t\t\treturn globalData[d].FRA_SENTENCE\n\t\t})\n\n\t\tsetFileData(jsonToTSV(english, france))\n\t}, [state, select_rev_id, remove_candidate_id, heatmap1_field_list])\n\n\tfunction jsonToTSV(english, france) {\n\t\tlet tsv_string = '';\n\t\tfor (var i = 0; i < english.length; i++) {\n\t\t\tlet row = `${english[i]}\\t${france[i]}`\n\t\t\ttsv_string += (tsv_string === '' ? `${row}` : `\\n${row}`);\n\n\t\t}\n\t\treturn tsv_string;\n\t}\n\n\treturn (\n\t\t<div className={classes.outerDiv}>\n\t\t\t<svg ref={svgHeatmap1Ref}></svg>\n\n\t\t\t{/* <div className={classes.emptyDiv}></div>\n      <div className={classes.inlineDiv}>\n        <h2> cosine similarity </h2>\n\n        <svg ref={svgHeatmap2Ref}></svg>\n      </div> */}\n\n\n\t\t\t<Dialog\n\t\t\t\topen={open}\n\t\t\t\tonClose={handleClose}\n\t\t\t\t// aria-labelledby=\"alert-dialog-title\"\n\t\t\t\t// aria-describedby=\"alert-dialog-description\"\n\t\t\t>\n\t\t\t\t<DialogTitle id=\"alert-dialog-title\">\n\t\t\t\t\t{\"Delete Confirmation?\"}\n\t\t\t\t</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\tAre you sure to delete this filter?\n          \t\t\t</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={handleClose}>Cancle</Button>\n\t\t\t\t\t<Button onClick={handleRemoveFilter} >\n\t\t\t\t\t\tOkay\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t\t<CSVLink data={fileData} filename=\"results.tsv\" noHeader={true}>\n\t\t\t\t<Button style={{ color: \"black\" }} color=\"inherit\" variant=\"contained\" size=\"small\">Save Data to .csv</Button>\n\t\t\t</CSVLink>\n\t\t</div>\n\t);\n}\n\n\n\nexport default Heatmap;\n","import React, { createContext, useReducer } from \"react\";\n// import original_data from \"../extractor/50000_meteor.json\"\n// for testing\nimport original_data from \"../extractor/1000_slice_ngram.json\"\nimport * as d3 from 'd3'\n//import ngram_data from \"../extractor/ngram.json\"\n\n\n\n// invert color scale\n\n \nconst interpolateBlues = idx => d3.interpolateBlues(1 - idx)   \nconst interpolateGreens = idx => d3.interpolateGreens(1 - idx)   \nconst interpolateGreys = idx => d3.interpolateGreys(1 - idx)   \nconst interpolateOranges = idx => d3.interpolateOranges(1 - idx)   \nconst interpolatePurples = idx => d3.interpolatePurples(1 - idx)   \nconst interpolateReds = idx => d3.interpolateReds(1 - idx)   \n\nexport const colorScaleList = [interpolateBlues, interpolateGreens, interpolateGreys, interpolateOranges, interpolatePurples\n, interpolateReds, interpolateBlues, interpolateGreens, interpolateGreys, interpolateOranges, interpolatePurples]\n\n\n// getScaleList(original_data,fieldList)\n// export const fieldList = [\"CORR\", \"BACK_ENG_CORR\", \"BACK_FRA_CORR\", \"LENGTH_DIFF\", \"TOKEN_LENGTH_DIFF\"] \nexport const fieldList = [\"CORR\", \"BACK_ENG_CORR\", \"BACK_KOR_CORR\", \"LENGTH_DIFF\", \"TOKEN_LENGTH_DIFF\"] \n\nexport var colorScaleMap = {}\nfieldList.forEach((field,i) => {\n  colorScaleMap[field] = colorScaleList[i]\n})\n\n\n\n\nexport var globalData = original_data.slice(0,1000)\n\nconst defaultWeight = {}\nfieldList.forEach(d => {\n  console.log(d)\n  defaultWeight[d] = 5\n})\n// Default Weight is 5\nconst initialState = {\n  filter_set : [],\n  weight : defaultWeight,\n  isChangeWeight : false,\n  isSavedFiltered : false,\n  rev_filter_info : [],\n  text_compare_id : [0],\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"SET_REV_FILTER_INFO\": \n      return {\n        ...state,\n        rev_filter_info : action.data\n      }\n    case \"SET_WEIGHT_VALUE\":\n      return {\n        ...state,\n        weight : action.data\n      }\n    case \"SET_FILTER_LIST\" :\n      return {\n        ...state,\n        filter_list : action.data\n      }\n    case \"SET_IS_SAVED_FILTERED\":\n      return {\n        ...state,\n        isSavedFiltered : action.data\n      }\n    case \"SET_IS_CHANGE_WEIGHT\" :\n      return {\n        ...state,\n        isChangeWeight : action.data\n      }\n    case \"SET_TEXT_COMPARE_ID\" :\n      return {\n        ...state,\n        text_compare_id : action.data\n      }\n    \n    \n    default:\n      return{\n        ...state\n      }\n  }\n}\n\nexport const UserDispatch = createContext(null);\n\nfunction DataProvider({ children }) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n\n  \n\n\n  // Usage : refer to below code\n\n  // 1. How to set\n  //const test_bar_data = {A:1, B:1, C:1, D:1, E:1}\n  //dispatch({type : \"SET_BAR_DATA\", data : test_bar_data});\n  //dispatch({type : \"SET_NODE_ID\", data : d.id})\n\n  // 2. How to get\n  //const {state, dispatch} = useContext(UserDispatch);\n  // let my_id = state.node_id\n\n  return (\n    <UserDispatch.Provider value={{ state, dispatch }}>\n      {children}\n    </UserDispatch.Provider>\n  );\n}\n\nexport default DataProvider;","import { useEffect, useState, useRef } from \"react\";\nimport * as d3 from \"d3\"\nimport { numberStatsGenerator, FilterRangeHistogram, FilterRangeBoxPlot } from '@lineup-lite/components';\nimport { globalData, fieldList, fieldList_text, colorScaleMap } from \"./reducers/StaticData\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nvar x;\nvar y;\n\nexport var set_field_boxplot = null\n\nfunction FilterBoxPlot() {\n\n    const compute = numberStatsGenerator();\n    \n    const state = useSelector(state => state.filter)\n\n\tconst [myField, setMyField] = useState(fieldList)\n\n\tset_field_boxplot = setMyField\n\n    const boxplot_ref = useRef()\n\n\n    useEffect(() => {\n\t\t\n        //    backend     ..\n        const stat = fieldList.map(field => {\n            return {key : field, value : compute(globalData.map(d => d[field]))}\n        })\n        var y_max = 0\n        var y_min = 999999\n        stat.forEach(tmp_stat => {\n            if(y_max < tmp_stat.value.max) \n                y_max = parseFloat(tmp_stat.value.max)\n            if(y_min > tmp_stat.value.min)\n                y_min = parseFloat(tmp_stat.value.min)\n        })\n\n        var margin = { top: 10, right: 30, bottom: 120, left: 30 },\n            width = 280 - margin.left - margin.right,\n            height = 310 - margin.top - margin.bottom;\n\n        const space = 17\n\n        d3.select(boxplot_ref.current).selectAll(\"*\").remove()\n\n        // append the svg object to the body of the page\n        var svg = d3.select(boxplot_ref.current)\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"id\",\"filter_boxplot\")\n            .attr(\"transform\",\n                \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        // Read the data and compute summary statistics for each specie\n\n        // const myData = [{ key: 'CORR', value : {q1 : 0.5, median : 0.7, q3 : 0.9, interQuantileRange : 0.4, min : 0.5 - 1.5 * 0.4, max : 0.9 + 1.5 * 0.4}}\n        //     ,{ key : 'BACK_ENG_CORR', value: {q1 : 0.6, median : 0.73, q3 : 0.8, interQuantileRange : 0.2, min : 0.6 - 1.5 * 0.2, max : 0.8 + 1.5 * 0.2}}\n        //     ,{ key : 'BACK_FRA_CORR', value : {q1 : 0.3, median : 0.5, q3 : 0.7, interQuantileRange : 0.4, min : 0.3 - 1.5 * 0.4, max : 0.7 + 1.5 * 0.4}}]\n\n        // // Compute quartiles, median, inter quantile range min and max --> these info are then used to draw the box.\n        // var sumstat = d3. // nest function allows to group the calculation per level of a factor\n        //     rollup(data, d => d.id, function (d) {\n        //         var q1 = d3.quantile(d.map(function (g) { return g.CORR; }).sort(d3.ascending), .25)\n        //         var median = d3.quantile(d.map(function (g) { return g.CORR; }).sort(d3.ascending), .5)\n        //         var q3 = d3.quantile(d.map(function (g) { return g.CORR; }).sort(d3.ascending), .75)\n        //         var interQuantileRange = q3 - q1\n        //         var min = q1 - 1.5 * interQuantileRange\n        //         var max = q3 + 1.5 * interQuantileRange\n        //         return ({ q1: q1, median: median, q3: q3, interQuantileRange: interQuantileRange, min: min, max: max })\n        //     })\n        //     .entries(data)\n\n\n        // Show the Y scale\n\n\n\n        x = d3.scaleBand()\n            .range([0, width])\n            .domain(myField)\n            .paddingInner(1)\n            .paddingOuter(.5)\n        svg.append(\"g\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(d3.axisBottom(x).tickFormat(d => fieldList_text[d]))\n\t\t\t.selectAll(\"text\")\n\t\t\t.style(\"text-anchor\", \"end\")\n\t\t\t.attr(\"dx\", \"-.8em\")\n\t\t\t.attr(\"dy\", \".15em\")\n\t\t\t.attr(\"transform\", function (d) {\n\t\t\t\treturn \"rotate(-70)\";\n\t\t\t  })\n\n\n        // Show the Y scale\n        y = d3.scaleLinear()\n            .domain([y_min, y_max])\n            .range([height, 0])\n        svg.append(\"g\").call(d3.axisLeft(y))\n\n        // Show the main vertical line\n\n        const boxplot_svg = svg.append(\"g\")\n\n        boxplot_svg\n            .selectAll(\"vertLines\")\n            .data(stat)\n            .enter()\n            .append(\"line\")\n            .attr(\"x1\", function (d) { return (x(d.key)) })\n            .attr(\"x2\", function (d) { return (x(d.key)) })\n            .attr(\"y1\", function (d) { return (y(d.value.min)) })\n            .attr(\"y2\", function (d) { return (y(d.value.max)) })\n            .attr(\"stroke\", \"lightgrey\")\n            .style(\"stroke-dasharray\",(\"10\",\"3\"))\n            .style(\"width\", 40)\n\n        // rectangle for the main box\n        var boxWidth = (width / myField.length) - space\n        boxplot_svg\n            .selectAll(\"boxes\")\n            .data(stat)\n            .enter()\n            .append(\"rect\")\n            .attr(\"x\", function (d) { return (x(d.key) - boxWidth / 2) })\n            .attr(\"y\", function (d) { return (y(d.value.q3)) })\n            .attr(\"height\", function (d) { return (y(d.value.q1) - y(d.value.q3)) })\n            .attr(\"width\", boxWidth)\n            .attr(\"stroke\", \"black\")\n            .style(\"fill\", d => colorScaleMap[d.key](0.5))\n            .style(\"opacity\",0.8)\n\n        // Show the median\n        boxplot_svg\n            .selectAll(\"medianLines\")\n            .data(stat)\n            .enter()\n            .append(\"line\")\n            .attr(\"x1\", function (d) { return (x(d.key) - boxWidth / 2) })\n            .attr(\"x2\", function (d) { return (x(d.key) + boxWidth / 2) })\n            .attr(\"y1\", function (d) { return (y(d.value.median)) })\n            .attr(\"y2\", function (d) { return (y(d.value.median)) })\n            .attr(\"stroke\", \"black\")\n            .style(\"width\", 80)\n\n        \n        \n\n    }, [myField])\n\n\n    useEffect( () => {\n        const filter_info = state.rev_filter_info\n\n        d3.select(boxplot_ref.current).\n        \n        selectAll(\"#path_g\").remove()\n        const svg = d3.select(\"#filter_boxplot\")\n        // svg.selectAll(\"*\").remove()\n        // Draw the line\n\n        var avg_list = []\n        filter_info.forEach(cur_info => {\n            const id = cur_info.id\n            const rev_color = cur_info.rev_color\n            const filter_id = cur_info.filter_id\n\n            var tmp_avg_dict = {}\n\n            fieldList.forEach(field => {\n                tmp_avg_dict[field] = 0\n            })\n\n\n            filter_id.map(tmp_id => {\n                fieldList.forEach(field => {\n                    tmp_avg_dict[field] += parseFloat(globalData[tmp_id][field])\n                })\n            })\n            const avg_info = myField.map(d => {\n                return {field : d, avg : (tmp_avg_dict[d] / filter_id.length)}\n            })\n    \n            avg_list.push({id : id, rev_color : rev_color, avg : avg_info})\n        })\n        \n        // console.log(avg_list)\n\n\n        var valueline = d3.line().x(d => x(d.field)).y(d => y(d.avg))\n        const path_svg = svg.selectAll(\"filter_path\").data(avg_list, d=> d.id).enter().append(\"g\").attr(\"id\",\"path_g\")\n        path_svg.selectAll(\"my_path\").data(d => [d.avg]).enter().append(\"path\").attr(\"fill\", \"none\").attr(\"stroke\",\n        function(d) {\n            return d3.select(this.parentNode).datum().rev_color      \n        })\n        .attr(\"stroke-width\",1.5).attr(\"d\",valueline)\n\n\n    },[state, myField])\n    // set the dimensions and margins of the graph\n\n\n    return (\n        <div id=\"my_dataviz\">\n            <svg ref={boxplot_ref} />\n        </div>\n    )\n}\n\nexport default FilterBoxPlot;","import p4 from 'p4.js'\nimport { forwardRef, useEffect, useImperativeHandle, useRef, Component } from 'react';\nimport { UserDispatch, globalData } from \"./context/DataProvider\";\nimport * as d3 from 'd3'\nimport 'd3-transition';\nimport { JsonToTable } from \"react-json-to-table\";\nimport { axisLeft, transition } from 'd3';\n\n\n\nvar new_data = globalData;\n\nclass Lines extends Component {\n    state = {\n      value: 100\n    }\n    handleChange = (e) => {\n      this.setState({\n        value: e.target.value\n      })\n      this.props.valueChanged(e.target.value);\n    }\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.valueChanged(this.state.value);\n      }\n\n    render() {\n      return (\n        <form onSubmit={this.handleSubmit}>\n            <label># lines</label>\n          <input\n        type = \"number\"\n            min=\"10\" \n            max={new_data.length}\n            step=\"30\"\n            value={this.state.value}\n            onChange={this.handleChange}\n          />\n        </form>\n      );\n    }\n  }\n\n\nconst PCP = forwardRef((props, ref) => {\n\n    const heatmap1_field_list = [\"CORR\", \"BACK_ENG_CORR\", \"BACK_FRA_CORR\", \"LENGTH_DIFF\", \"TOKEN_LENGTH_DIFF\", \"SENTENCE_LEN_DIFF\", \"id\"];\n\t\n    \n\n\n    var newTable = [];\n    var nLines = 100;\n    var x = null, y, dragging = {};\n\tvar dimensions = heatmap1_field_list.filter(item => item != 'id');\n\n    useImperativeHandle(ref, () => ({\n        update(lineup, rank) { \n            new_data = [];\n            if (lineup) {\n                rank.forEach(d => {\n                    new_data.push(d.original);\n                })\n            } else {\n                new_data = globalData\n            }\n            updatePCP(new_data, nLines); \n        }\n    }));\n\n    const updatePCP = (new_data, nLines) => {\n\n        var data = new_data.slice(0, nLines);\n\n        const asc = arr => arr.sort((a, b) => a - b);\n\n        const sum = arr => arr.reduce((a, b) => a + b, 0);\n\n        const mean = arr => sum(arr) / arr.length;\n\n        // sample standard deviation\n        const std = (arr) => {\n            const mu = mean(arr);\n            const diffArr = arr.map(a => (a - mu) ** 2);\n            return Math.sqrt(sum(diffArr) / (arr.length - 1));\n        };\n\n        const quantile = (arr, q) => {\n            const sorted = asc(arr);\n            const pos = (sorted.length - 1) * q;\n            const base = Math.floor(pos);\n            const rest = pos - base;\n            if (sorted[base + 1] !== undefined) {\n                return sorted[base] + rest * (sorted[base + 1] - sorted[base]);\n            } else {\n                return sorted[base];\n            }\n        };\n\n\n        // 10   \n        /* \n            1.  Data  0~10 value  .\n            2. corr_quan[i] = between 0 ~ 9 ...   data  . // scaleLinear   \n            3. Stroke Width  ... ? Count...    ?\n            4.  Line   .. -> path    \n            5.  Width        .\n            5. d3.selectAll()\n            4. corr_quan[i] -> \n        */\n\n\n\n\n        const converted_data = data.map((d, i) => {\n            var newD = {}\n            heatmap1_field_list.forEach(key => {\n                newD[key] = d[key];\n            })\n\t\t\tnewD[\"rank\"] = i;\n            return newD\n        })\n\n        //console.log(converted_data)\n\n        var count = {}\n        var count_id = {}\n        converted_data.forEach(d => {\n            const obj = JSON.parse(JSON.stringify(d))\n            // console.log(obj)\n            //delete d['id']\n            var key = JSON.stringify(d)\n            count[key] = (count[key] || 0) + 1\n\n            if (key in count_id) {\n                // console.log(key)\n                // console.log(count_id)\n                count_id[key].push(obj['id'])\n            }\n            else\n                count_id[key] = [obj['id']]\n\n        })\n\n        //console.log(count_id)\n\n        var counted_list = []\n        Object.keys(count).forEach((key, i) => {\n            var newJson = JSON.parse(key)\n            newJson['count'] = count[key]\n            //newJson['id'] = i\n            newJson['id_list'] = count_id[key]\n            counted_list.push(newJson)\n        })\n\n        // console.log(counted_list)\n\n        data = counted_list\n\n\n\n        const margin = { top: 50, right: 50, bottom: 10, left: 50 },\n            width = 1600 - margin.left - margin.right,\n            height = 500 - margin.top - margin.bottom;\n\n        // append the svg object to the body of the page\n        var svg = d3.select(\"svg#mysvg_PCP\")\n\n        svg\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n\n        svg = svg.select(\"g\")\n            .attr(\"transform\",\n                `translate(${margin.left},${margin.top})`);;\n        // Parse the Data\n\n\n        // Color scale: give me a specie name, I return a color\n        const color = d3.scaleOrdinal()\n            .domain(heatmap1_field_list)\n            .range(d3.schemeCategory10)\n\n        // Here I set the list of dimension manually to control the order of axis:\n        \n\n        if (x == null) {//update axis first time\n            \n            // For each dimension, I build a linear scale. I store all in a y object\n            y = {}\n            const thres = {}\n            const n = [...new Array(10).keys()]\n\n            var quan_scale = {}\n\n            const widthExtent = d3.extent(data, d => d.count)\n            const widthScale = d3.scaleLinear().domain(widthExtent).range([1, 40])\n\n            var label = {}\n\n            for (var i in dimensions) {\n                var name = dimensions[i]\n                const max = d3.max(globalData, d => +d[name])\n                const min = d3.min(globalData, d => +d[name])\n                y[name] = d3.scaleLinear()\n                    //.domain([0, 1])\n                    .domain([min, max]) // --> Same axis range for each group\n                    // --> different axis range for each group --> .domain( [d3.extent(data, function(d) { return +d[name]; })] )\n                    .range([height, 0])\n                //label[name] = d3.scaleLinear().domain([0,numOfSplit]).range([min,max])\n                // var quan = d3.scaleQuantize().domain([min,max]).range(n)\n                // const tmp_scale = (val) => {\n                //     return d3.scaleLinear().domain([9,0]).range([height,0])(quan(val))\n                // }\n                // quan_scale[name] = tmp_scale\n                // console.log(quan_scale[name]((max)))\n                //console.log(y[name](max))\n                //console.log(thres[name]((min+max)/2))\n            }\n\n            // Build the X scale -> it find the best position for each Y axis\n            x = d3.scalePoint()\n                .range([0, width])\n                .domain(dimensions);\n\t\t}\n\n\n\n        // Highlight the specie that is hovered\n        const highlight = function (event, d) {\n\n            // var selected_specie = d.Species\n\n            // first every group turns grey\n            d3.selectAll(\".line\")\n                .style(\"stroke\", \"lightgrey\")\n                .style(\"opacity\", \"0.2\")\n            // Second the hovered specie takes its color\n            d3.selectAll(\".d\" + d.id)\n                .style(\"stroke\", \"red\")\n                .style(\"opacity\", \"1\")\n                .style(\"zIndex\", 100)\n\n            //console.log(d.id_list)\n            //const addr = \"detail/\" + d.id_list\n\n\n\n            // var info_list = []\n            // d.id_list.forEach(tmp_id => {\n            //     const detail = data.filter(d => d.id === tmp_id)\n            //     info_list.push(detail[0])\n            // })\n            // console.log(info_list)\n            // newTable = info_list\n            //console.log(d.id_list)\n        }\n\n        // Unhighlight\n        const doNotHighlight = function (event, d) {\n\t\t\tconsole.log(\"asdf\")\n            d3.selectAll(\".line\")\n                .style(\"stroke\", function (d2, i) { return d3.interpolateRdBu(d2.rank/nLines) })\n                .style(\"opacity\", \"0.2\")\n                .style(\"zIndex\", 1)\n        }\n\n\t\tfunction position(d) {\n\t\t\t\n\t\t\tvar v = dragging[d];\n\t\t\treturn v == null ? x(d) : v;\n\t\t  }\n\nfunction transition(g) {\n\treturn g.transition().duration(500);\n  }\n  \n        // The path function take a row of the csv as input, and return x and y coordinates of the line to draw for this raw.\n        function path(d) {\n            return d3.line()(dimensions.map(\n                function (p) {\n                    // console.log(d[p])\n                    // console.log(quan_scale[p](d[p]))\n                    return [position(p), y[p](d[p])]; \n                }));\n        }\n\n        // Draw the lines\n        console.log(new_data, data);\n        var paths = svg.selectAll(\"path.line\")\n            .data(data, d => d ? d.id : -1);\n        //console.log(paths);\n        paths.enter()\n            .append(\"path\")\n            .attr(\"class\", function (d) { return \"line d\" + d.id }) // 2 class for each line: 'line' and the group name\n            .attr(\"d\", path)\n            .style(\"fill\", \"none\")\n            //.style(\"stroke-width\", function (d) { return widthScale(d.count) })\n            .style(\"stroke-width\", 1)\n            .style(\"opacity\", (d, i) => {\n                return 0.2\n            })\n            .on(\"mouseover\", highlight)\n            .on(\"mouseleave\", doNotHighlight)\n            .on(\"dblclick\", function (event, d) {\n\n                // const ID = d.id\n                const addr = \"detail2/\" + d.id_list\n                window.open(addr, '_blank')\n            });\n\n            svg.selectAll(\"path.line\").style(\"stroke\", function (d, i) { return d3.interpolateRdBu(d.rank/nLines) })\n\n        paths.exit().remove();\n        // Draw the axis:\n\n\t\tvar axis = svg.selectAll(\"g.dimension\")\n\t\t\t.data(dimensions, d => d)\n\t\t\t.enter()\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"dimension\")\n\t\t\t// I translate this element to its right position on the x axis\n\t\t\t.attr(\"transform\", function (d) { return `translate(${x(d)})` })\n\t\t\t//and add drag\n\t\t\t.call(d3.drag()\n\t\t\t\t//.subject(function(event, d) { return d == null ? {x: x(event.x)}: d; })\n\t\t\t\t.on(\"start\", function(event, d) {\n\t\t\t\t\tdragging[d] = x(d);\n\t\t\t\t})\n\t\t\t\t.on(\"drag\", function(event, d) {\n\t\t\t\t\tdragging[d] = Math.min(width, Math.max(0, event.x));\n\t\t\t\t\tdimensions.sort(function(a, b) { return position(a) - position(b); });\n\t\t\t\t\tx.domain(dimensions);\n\t\t\t\t\taxis.attr(\"transform\", function(d) { return \"translate(\" + position(d) + \")\"; })\n\t\t\t\t})\n\t\t\t\t.on(\"end\", function(event, d) {\n\t\t\t\t\tdelete dragging[d];\n\t\t\t\t\ttransition(d3.select(this)).attr(\"transform\", \"translate(\" + x(d) + \")\");\n\t\t\t\t\ttransition(d3.select(\"svg#mysvg_PCP\").selectAll(\"path.line\")).attr(\"d\", path);\n\t\t\t\t}))\n\n\n\n\t\t\t// And I build the axis with the call function\n\t\t\t// Add axis title\n\t\taxis.append(\"g\")\n\t\t\t.attr(\"class\", \"axis\")\n\t\t\t.each(function(d) { d3.select(this).call(axisLeft(y[d])); })\n\t\t\t.append(\"text\")\n\t\t\t.style(\"text-anchor\", \"middle\")\n\t\t\t.attr(\"y\", -9)\n\t\t\t.text(function (d) { return d; })\n\t\t\t.style(\"fill\", \"black\")\n\n\t\t// console.log(svg.selectAll(\"path\").data())\n        \n\n\n    }\n    useEffect(() => {\n        const numOfSplit = 10\n        const splitArray = [...new Array(numOfSplit).keys()]\n    \n        var quantileScale = {}\n        heatmap1_field_list.forEach((key) => {\n            const tmp_extent = d3.extent(globalData, d => d[key])\n            quantileScale[key] = d3.scaleQuantile().domain(tmp_extent).range(splitArray)\n        })\n    \n        const sampled_data = globalData.map((d,i) => {\n            var newD = {}\n            heatmap1_field_list.forEach(key => {\n                if(key === 'id')\n                    newD[key] = d[key]\n                else\n                {\n                    const myScale = quantileScale[key]\n                    const newValue = myScale(d[key])\n                    newD[key] = newValue\n                }\n            })\n            return newD\n        })\n        var count = {}\n        var count_id = {}\n        sampled_data.forEach(d => {\n            const obj = JSON.parse(JSON.stringify(d))\n            delete d['id']\n            var key = JSON.stringify(d)\n            count[key] = (count[key] || 0 ) + 1\n    \n            if(key in count_id){\n                count_id[key].push(obj['id'])\n            }\n            else\n                count_id[key] = [obj['id']]\n            \n        })\n    \n        var sampled_list = []\n        Object.keys(count).forEach((key, i) => { \n            const shuffled = count_id[key].sort(() => 0.5 - Math.random()).slice(0, Math.sqrt(count[key]));\n            sampled_list.push(...shuffled);\n        })\n        console.log(sampled_list)\n        new_data = [];\n        globalData.forEach(d => {\n            if(sampled_list.includes(d.id)){\n                new_data.push(d);\n            }\n        })\n        updatePCP(new_data, 100);\n    });\n      \n\n\n      function valueChanged (d)  {\n        nLines = (+d > globalData.length)? globalData.length: +d;\n        updatePCP(new_data, nLines);\n      }\n    return (\n    \n    <div>\n        <Lines valueChanged={valueChanged}/>\n        <div id=\"my_dataviz\">\n            <svg id=\"mysvg_PCP\">\n\t\t\t\t<g></g>\n\t\t\t</svg>\n\n            <div>\n                <JsonToTable json={newTable} />\n            </div>\n        </div>\n    </div>\n    )\n});\n\n\nexport default PCP;","import * as d3 from 'd3';\r\nimport { Grid } from \"ag-grid/main\";\r\nimport { colorScaleList, fieldList, fieldList_text, fixed_lineup_list, max_LENGTH_DIFF, max_TOKEN_LENGTH_DIFF } from './reducers/StaticData'\r\nimport { colors } from '@mui/material';\r\n\r\nimport {SET_PHP_LINEUP_FILTER} from \"./reducers/php_lineup\"\r\nimport {store} from './index.js'\r\nimport {set_column_function} from './MyLineup'\r\nimport {set_scale_list} from './FilterHeatmap'\r\nimport { set_field_boxplot } from './FilterBoxPlot';\r\n\r\n\r\nlet GridOptions = {};\r\nlet brush_dict = [];\r\n\r\nfieldList.forEach(d => {\r\n\tbrush_dict.push({key: d, value: null});\r\n})\r\n\r\nexport function preprocess(data, pivot){\r\n    let nColor = data.nColor\r\n    \r\n    data.sort((a, b) => b[pivot] - a[pivot])\r\n\r\n    for(let i = 0; i < data.length; i++){\r\n        // if ((i+1 < data.length) && (data[i][pivot] == data[i+1][pivot])){\r\n        //     let start = i\r\n        //     let end = i + 1\r\n            \r\n        //     for(let j = i + 2 ; j < data.length; j++){\r\n        //         end = j;\r\n        //         if(data[i][pivot] != data[j][pivot]) break\r\n        //     } \r\n        //     for(let j = start; j < end; j++) data[j]['___group'] = Math.floor((start + end) / 2 / data.length * nColor)\r\n        //     i = end - 1 \r\n        // }\r\n        // else data[i]['___group'] = Math.floor(i / data.length * nColor)\r\n\t\tdata[i]['___group'] = 1;\r\n    }\r\n\r\n    let numBin = d3.select('#setBin').empty() ? 50 : d3.select('#setBin').property('value')\r\n    if(numBin == \"\") numBin = 50\r\n    else if(numBin < 10) numBin = 10\r\n\r\n    let histData = []\r\n    Object.keys(data[0]).forEach(function(attr){\r\n        if(attr[0] != '_'){\r\n            let eachHist = d3.bin().value(k => k[attr]).thresholds(numBin)(data)\r\n            let eachHistSep = eachHist.map(function(d){\r\n                return {data: Array.from(d3.group(d, k => k['___group']), ([key, value]) => ({'key': key, 'values': value})), dataLength: d.length, selectedLength: d.filter(k => k['___selected'] !== false).length}\r\n            })\r\n            eachHistSep.name = attr\r\n            eachHistSep.pivot = (attr == pivot)\r\n            eachHistSep.min = eachHist[0].x0\r\n            // eachHistSep.max = eachHist[eachHist.length-1].x1\r\n\t\t\teachHistSep.max = 1\r\n            histData.push(eachHistSep.reverse())\r\n        }\r\n    })\r\n    return histData\r\n}\r\n\r\nlet eachHeight = 250\r\nlet eachWidth = 100\r\nlet bottomHeight = 35\r\nlet padding = {\r\n    left: 20,\r\n    right: 20,\r\n    top: 20,\r\n    bottom: 20\r\n}\r\nlet marginLabelTop = 10\r\nlet marginLabelBottom = 15\r\nlet marginBtn = 20\r\nlet marginIn = 20\r\n\r\n// let widgetEachWidth = 8\r\n// let widgetBtnWidth = 2\r\n// let widgetEachHeight = 14\r\n// let widgetHeight = 20\r\n\r\nfunction translate(x, y){\r\n    return 'translate('+x+','+y+')'\r\n}\r\n\r\nexport function DrawHistograms(data, __data, redrawLines){\r\n\t\r\n    //const dispatch = useDispatch()\r\n\r\n    // d3.select(\"body\")\r\n    //     .on('keydown', function(event, k){\r\n    //         if(event.shiftKey){\r\n    //             d3.select('#others').selectAll('.drag').style('visibility', 'visible')\r\n    //         }\r\n    //     })\r\n    //     .on('keyup', function(event, k){\r\n    //         d3.select('#others').selectAll('.drag').style('visibility', 'hidden')\r\n    //     })\r\n\r\n    let currentPivot = data.filter(k => k.pivot)[0].name\r\n    // let isMaxOut = !d3.select('#enableGrayOut').select('input').property('checked')\r\n\tlet isMaxOut = false;\r\n\r\n    data.forEach(function(k, i){\r\n        if(k.property == undefined){\r\n            k.property = {\r\n                width: eachWidth,\r\n                translateX: eachWidth*i,\r\n                order: i,\r\n                innerZoomRatio: 1\r\n            }\r\n        }\r\n        k.xScale = d3.scaleLinear().domain([0, d3.max(k, kk => kk.dataLength)]).range([0, k.property.width])\r\n        k.yScale = d3.scaleLinear().domain([k.min, k.max]).range([eachHeight, 0])\r\n        k.eachHeight = eachHeight/k.length\r\n    })\r\n\r\n    __data.forEach(function(k){\r\n        k['___lineData']= d3.line()(data.map((d, i) => [d.property.translateX + marginBtn*i, d.yScale(k[d.name])]))\r\n    })\r\n\r\n    let totalWidth = data.map(k => k.property.width).reduce((a, b) => (a + b), 0) + marginBtn * data.length + padding.left + padding.right\r\n    let totalHeight = eachHeight + bottomHeight + padding.top + padding.bottom\r\n\r\n    d3.select('#histogram').attr('width', totalWidth).attr('height', totalHeight)\r\n    d3.select('#others').attr('width', totalWidth).attr('height', totalHeight)\r\n    if(redrawLines){\r\n        d3.select('#line').attr('width', totalWidth - padding.left).attr('height', totalHeight - padding.top)\r\n        d3.select('#line_highlight').attr('width', totalWidth - padding.left).attr('height', totalHeight - padding.top)\r\n        d3.select('#line_filter').attr('width', totalWidth - padding.left).attr('height', totalHeight - padding.top)\r\n        d3.select('#line_filter_highlight').attr('width', totalWidth - padding.left).attr('height', totalHeight - padding.top)\r\n        d3.select('#line').style('left', padding.left+'px').style('top', padding.top+'px')\r\n        d3.select('#line_highlight').style('left', padding.left+'px').style('top', padding.top+'px')\r\n        d3.select('#line_filter').style('left', padding.left+'px').style('top', padding.top+'px')\r\n        d3.select('#line_filter_highlight').style('left', padding.left+'px').style('top', padding.top+'px')\r\n    }\r\n    // d3.select('#background').attr('width', totalWidth).attr('height', totalHeight)\r\n    //     .on('click', function(){\r\n    //         removeWidget()\r\n    //     })\r\n        \r\n    let svg = d3.select('#histogram').select('.wrapper').attr('transform', translate(padding.left, padding.top))  \r\n    // d3.select('#widgetArea').attr('transform', translate(padding.left, padding.top))\r\n    d3.select('.line_hover').attr('transform', translate(padding.left, padding.top))\r\n    d3.select('#others').select('.wrapper').attr('transform', translate(padding.left, padding.top))\r\n\r\n    let eachAttr = svg.selectAll('g.eachAttr').data(data, k=>k.name)\r\n    //eachAttr.exit().remove()\r\n    let enterAttr = eachAttr.enter().append('g').classed('eachAttr', true)\r\n\r\n    enterAttr.append('rect').classed('background', true)\r\n    enterAttr.append('g').classed('backHoverArea', true)\r\n    enterAttr.append('g').classed('backHistoArea', true)\r\n    enterAttr.append('g').classed('backHistoSmallArea', true)\r\n    enterAttr.append('g').classed('foregroundArea', true)\r\n\r\n    let histAttrs = eachAttr.merge(enterAttr)\r\n        .attr('transform', (k) => translate(k.property.translateX + marginBtn * k.property.order, 0))\r\n\r\n    eachAttr.exit().remove()\r\n\r\n    histAttrs.each(function(d, i){\r\n        let chartArea = d3.select(this)\r\n        chartArea.select('rect.background')\r\n            .attr('width', d.property.width + marginIn)\r\n            .attr('height', totalHeight)\r\n\r\n        let backHover = chartArea.select('.backHoverArea').selectAll('rect').data(k => k)\r\n        backHover = backHover.enter()\r\n            .append('rect').classed('backHover', true).merge(backHover)\r\n            .attr('width', k => k.dataLength > 0 ? d.property.width + marginIn : 0)\r\n            .attr('height', d.eachHeight)\r\n            .attr('transform', (k, i) => translate(0, d.eachHeight * i))\r\n            // .on('click', (event, k) => k.dataLength > 0 ? widget(k, d3.pointer(svg.node())) : null)\r\n        backHover.exit()\r\n            .remove()\r\n\r\n        let backHisto = chartArea.select('.backHistoArea').selectAll('rect').data(k => k)\r\n        backHisto.enter()\r\n            .append('rect').classed('backHisto', true).merge(backHisto)\r\n            .attr('width', (k, i) => d.xScale(k.dataLength))\r\n            .attr('height', d.eachHeight)\r\n            .attr('transform', (k, i) => translate(0, d.eachHeight * i))\r\n        backHisto.exit()\r\n            .remove()\r\n        \r\n        // let isBackChecked = d3.select('#option').select('#enableGhost').select('input').property('checked')\r\n\t\tlet isBackChecked = true;\r\n\r\n        let backHistoSmall = chartArea.select('.backHistoSmallArea').selectAll('rect').data(k => k)\r\n        backHistoSmall.enter()\r\n            .append('rect').classed('backHistoSmall', true).merge(backHistoSmall)\r\n            .attr('width', (k, i) => d.xScale(k.dataLength) > 3 || k.dataLength == 0 ? 0 : 4)\r\n            .attr('height', d.eachHeight)\r\n            .attr('transform', (k, i) => translate(0, d.eachHeight * i))\r\n            .style('visibility', () => isBackChecked ? 'visible': 'hidden')\r\n        backHistoSmall.exit()\r\n            .remove()\r\n       \r\n        let foregroundGroup = chartArea.select('.foregroundArea').selectAll('g').data(k => k)\r\n\r\n        //console.log(isMaxOut)\r\n\r\n        let foreground = foregroundGroup.enter()\r\n            .append('g').merge(foregroundGroup)\r\n            .attr('transform', (k, i) => translate(0, d.eachHeight * i)).style('visibility', 'visible')\r\n            .each(function(k, j){\r\n                let foregroundEach = d3.select(this).selectAll('rect').data(k => {/*console.log(k.data); */return k.data.sort((a, b) => +a.key -b.key);}, k => k.key)         \r\n                foregroundEach.enter()\r\n                    .append('rect').merge(foregroundEach)\r\n                    .attr('width', function(kk){\r\n                        if(k.selectedLength * d.property.innerZoomRatio > d.xScale.domain()[1]){\r\n                            return d.xScale(d.xScale.domain()[1]*kk.values.filter(k => k['___selected'] !== false).length/k.selectedLength)\r\n                        } \r\n                        else return d.xScale(kk.values.filter(k => k['___selected'] !== false).length * d.property.innerZoomRatio)\r\n                    })\r\n                    .attr('height', d.eachHeight)\r\n                    .attr('transform', function(k, l, nodes){\r\n                        if(l == 0) return translate(0, 0)\r\n                        else{\r\n                            let prev = d3.select(nodes[l-1])\r\n                            return translate(Number(prev.attr('width'))+Number(prev.attr('transform').split(',')[0].split('(')[1]) , 0)\r\n                        }\r\n                    })\r\n                    .attr('class', (kk) => (isMaxOut && k.selectedLength * d.property.innerZoomRatio > d.xScale.domain()[1]) ? 'gmax' : 'g'+kk.key)\r\n                    .classed('foreground', true).classed('clicked', false)\r\n                    .attr('id', (k) => 'i_'+k.key+'_'+i+'_'+j)\r\n\t\t\t\t\t.style('fill', colorScaleList[i](1 - j/d.length))\r\n                    .on('click', function(event, k){\r\n                        if(d3.select(this).classed('clicked')){\r\n                            d3.select(this).classed('clicked', false)\r\n                            pcp_hl([], 'line_highlight', true)\r\n                            //removeLine(k.values)\r\n                        }\r\n                        else{\r\n                            d3.selectAll('.foreground').classed('clicked', false)\r\n                            d3.select(this).classed('clicked', true)\r\n                            //addLine(k.values)\r\n                            console.log(k.values)\r\n\t\t\t\t\t\t\tlet clicked_data = [];\r\n\t\t\t\t\t\t\tk.values.forEach(d => {\r\n\t\t\t\t\t\t\t\tclicked_data.push({data: d})\r\n\t\t\t\t\t\t\t})\r\n                            pcp_hl(clicked_data, 'line_highlight', true)\r\n                        }\r\n                    })\r\n                \r\n                foregroundEach.exit()\r\n                    .attr('width', 0)     \r\n            })\r\n        foregroundGroup.exit().style('visibility', 'hidden')\r\n    })\r\n    \r\n    eachAttr = d3.select('#others').select('.wrapper').selectAll('g.eachAttr').data(data, k=>k.name)\r\n    enterAttr = eachAttr.enter().append('g').classed('eachAttr', true)\r\n    enterAttr.append('line').classed('phpaxis', true)\r\n    enterAttr.append('text').classed('toplabel', true)\r\n    enterAttr.append('text').classed('bottomlabel', true)\r\n    enterAttr.append('text').classed('bottomText', true)\r\n    enterAttr.append('rect').classed('highlightBorder', true)\r\n    enterAttr.append('line').classed('drag', true)\r\n    enterAttr.append('g').classed('brush', true)\r\n\r\n    let otherAttrs = eachAttr.merge(enterAttr)\r\n        .attr('transform', (k) => translate(k.property.translateX + marginBtn * k.property.order, 0))\r\n\r\n    otherAttrs.exit().remove()\r\n    otherAttrs.each(function(k, i){\r\n        let otherAttr = d3.select(this)\r\n        let axis = otherAttr.select('.phpaxis')\r\n            .attr('x0', 0).attr('y0', 0).attr('x1', 0).attr('y1', eachHeight)\r\n            .style('stroke-width', 2)\r\n\r\n\r\n\r\n\t\tlet toplabel = otherAttr.select('.toplabel')\r\n\t\t\t.attr(\"transform\", \"translate(\" + 0 + \" ,\" + ( - marginLabelTop ) + \")\")\r\n\t\t\t.style(\"text-anchor\", \"middle\")\r\n\t\t\t.style(\"font-size\", \"10px\")\r\n\t\t\t.text(d => {if(d.name == \"LENGTH_DIFF\" || d.name == \"TOKEN_LENGTH_DIFF\") return 0; else return d.max});\r\n\t\t\t\r\n\t\tlet bottomlabel = otherAttr.select('.bottomlabel')\r\n\t\t\t.attr(\"transform\", \"translate(\" + 0 + \" ,\" + (eachHeight + marginLabelBottom) + \")\")\r\n\t\t\t.style(\"text-anchor\", \"middle\")\r\n\t\t\t.style(\"font-size\", \"10px\")\r\n\t\t\t.text(d => {if(d.name == \"LENGTH_DIFF\") return max_LENGTH_DIFF; else if(d.name == \"TOKEN_LENGTH_DIFF\") return max_TOKEN_LENGTH_DIFF; else return d.min});\r\n\r\n        let _brush = d3.brushY().extent([[-marginIn, 0], [0, eachHeight]])\r\n            .on('end', function(event, attr){\r\n                let selected = event.selection\r\n\t\t\t\tlet yScale_rev = d3.scaleLinear().domain([eachHeight, 0]).range([attr.min, attr.max])\r\n\r\n\t\t\t\tbrush_dict.map(d => {\r\n\t\t\t\t\tif(d.key == attr.name){\r\n\t\t\t\t\t\tif(selected == null){\r\n\t\t\t\t\t\t\td.value = null;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\td.value = [yScale_rev(selected[1]), yScale_rev(selected[0])];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tstore.dispatch(SET_PHP_LINEUP_FILTER(brush_dict))\r\n\r\n                __data.forEach(function(k){\r\n                    let yVal = attr.yScale(k[attr.name])\r\n                    let isSelected = true\r\n                    if(selected == null || selected[0] == selected[1]) k['___brush'+attr.name] = true\r\n                    else k['___brush'+attr.name] = yVal >= selected[0] && yVal <= selected[1]\r\n                    histAttrs.each(function(kk){\r\n                        isSelected = isSelected && (k['___brush'+kk.name] == undefined ? true : k['___brush'+kk.name])\r\n                    })\r\n                    k['___selected'] = isSelected\r\n                })\r\n                //if(selected === null || selected[0] === selected[1]) data[i]['___isBrushed'] = false\r\n                //else data[i]['property']['___isBrushed'] = true\r\n                let newData = updateData(data, __data, currentPivot)\r\n                DrawHistograms(newData, __data, false)\r\n            })\r\n        let brush = otherAttr.select('.brush').call(_brush)\r\n\r\n        let belowText = otherAttr.select('.bottomText')\r\n            .attr('transform', translate(k.property.width / 2, eachHeight + bottomHeight))\r\n            .style('pointer-events', 'all')\r\n\t\t\t.style(\"text-anchor\", \"middle\")\r\n\t\t\t.style(\"font-size\", \"10px\")\r\n\t\t\t.style(\"cursor\", \"pointer\")\r\n            .text(k => fieldList_text[k.name])\r\n            // .classed('pivot', k => k.pivot)\r\n            .on('click', function(event, k){\r\n                if(event.ctrlKey){\r\n                    k.property.width *= 2\r\n                    data.forEach(function(kk){\r\n                        if(kk.property.order > k.property.order) kk.property.translateX += k.property.width/2\r\n                    })\r\n                    DrawHistograms(data, __data)\r\n                }\r\n                // else if(event.shiftKey){\r\n                //     k.property.innerZoomRatio *= 2\r\n                //     DrawHistograms(data, __data)\r\n                // }\r\n                else{\r\n                    let newData = updateData(data, __data, k.name)\r\n                    DrawHistograms(newData, __data)\r\n                }\r\n            })\r\n            .call(d3.drag()\r\n                    .on('end', dragMoveEnd)\r\n                    .on(\"drag\", (event, k) => dragMove(k.property.order, belowText.nodes()[0], event)\r\n            ))\r\n\r\n        let highlightBorder = otherAttr.select('.highlightBorder')\r\n            .attr('width', k => k.property.width + marginIn * 2)\r\n            .attr('height', eachHeight + marginIn * 2)\r\n            .attr('transform', translate(-marginIn, -marginIn))\r\n            // .classed('pivot', k => k.pivot).classed('notPivot', k => !k.pivot)\r\n\t\t\t.classed('notPivot', true)\r\n            \r\n        let dragBar = otherAttr.select('.drag')\r\n            .attr('x0', 0).attr('y0', 0).attr('x1', 0).attr('y1', eachHeight + bottomHeight)\r\n            .attr('transform', k => translate(k.property.width, 0))\r\n            .style('visibility', 'hidden')\r\n            .style('pointer-events', 'auto')\r\n            .call(d3.drag()\r\n                    .on(\"drag\", (event, k) => dragZoom(k, dragBar.nodes()[0], event))\r\n                    .on(\"end\", (event, k) => dragZoomEnd(dragBar.nodes()[0])))\r\n    })\r\n   \r\n    setCallbacks(data, __data)\r\n    // let isLines = (!d3.select('#option').select('#displayLines').select('input').property('checked')) && (redrawLines === true)\r\n\tlet isLines = false;\r\n    if(isLines){\r\n        pcp(__data)\r\n        //pcp_hl(GridOptions.api.getSelectedRows(), 'line_highlight', true)\r\n    } \r\n    // WIDGET\r\n    // function widget(d, mouse){\r\n    //     if(d3.select('#widget').size() > 0) removeWidget()\r\n\r\n    //     let widget = d3.select('#widgetArea').append('g').attr('id', 'widget').attr('transform', translate(mouse[0], mouse[1]))\r\n    //     widget.append('rect').attr('width', 10 * (widgetEachWidth + widgetBtnWidth) + widgetBtnWidth*3).attr('height', 20)\r\n    //     widget.selectAll('rect.widget').data(d.data).enter()\r\n    //         .append('rect')\r\n    //         .attr('width', widgetEachWidth)\r\n    //         .attr('height', 14)\r\n    //         .attr('transform', k => translate(widgetBtnWidth*2 + (widgetEachWidth + widgetBtnWidth)*k.key, 3))\r\n    //         .attr('class', k => \"g\"+k.key)\r\n    //         .style('pointer-events', 'all')\r\n    //         .on('click', function(event, k){\r\n    //             if(d3.select(this).classed('clicked')){\r\n    //                 d3.select(this).classed('clicked', false)\r\n    //                 pcp_hl([], 'line_highlight', true)\r\n    //             }\r\n    //             else{\r\n    //                 d3.selectAll('#widget rect').classed('clicked', false)\r\n    //                 d3.select(this).classed('clicked', true)\r\n    //                 pcp_hl(k.values, 'line_highlight', true)\r\n    //             }\r\n    //         })\r\n    //         .classed('clicked', k => k.values.filter(kk => kk['___pcp']).length !== k.values.length)\r\n    // }\r\n    // function removeWidget(){\r\n    //     d3.select('#widgetArea').select('#widget').remove()\r\n    // }\r\n\r\n    // MOVE\r\n    function dragMove(i, _this, event){\r\n        d3.select(_this).classed('dragging', true)\r\n        let mousePosition = d3.pointer(event, _this)[0]\r\n        if(i < data.length - 1 && mousePosition > (data[i+1].property.translateX - data[i].property.translateX)/2){\r\n            [data[i+1], data[i]] = [data[i], data[i+1]]\r\n            data[i].property.translateX = data[i+1].property.translateX\r\n            data[i+1].property.translateX += data[i].property.width\r\n            data[i].property.order = i\r\n            data[i+1].property.order = i+1\r\n            histAttrs.attr('transform', (k, i) => translate(k.property.translateX + marginBtn * k.property.order, 0))\r\n            otherAttrs.attr('transform', (k, i) => translate(k.property.translateX + marginBtn * k.property.order, 0))\r\n        }\r\n        else if(i > 0 && mousePosition < (data[i-1].property.translateX - data[i].property.translateX)/2){\r\n            [data[i-1], data[i]] = [data[i], data[i-1]]\r\n            data[i-1].property.translateX = data[i].property.translateX\r\n            data[i].property.translateX += data[i-1].property.width\r\n            data[i].property.order = i\r\n            data[i-1].property.order = i-1\r\n            histAttrs.attr('transform', (k, i) => translate(k.property.translateX + marginBtn * k.property.order, 0))\r\n            otherAttrs.attr('transform', (k, i) => translate(k.property.translateX + marginBtn * k.property.order, 0))\r\n        }\r\n    }\r\n    function dragMoveEnd(){\r\n        d3.selectAll('.dragging').classed('dragging', false)\r\n\t\tlet column_name = [];\r\n\t\tdata.forEach(d => {\r\n\t\t\tcolumn_name.push(d.name);\r\n\t\t})\r\n\t\t//console.log(column_name);\r\n        const column_list = [...fixed_lineup_list].concat(column_name)\r\n        set_column_function(column_list)\r\n\t\tset_scale_list(column_name)\r\n\t\tset_field_boxplot(column_name)\r\n        if(isLines) {\r\n\t\t\t__data.forEach(function(k){\r\n\t\t\t\tk['___lineData']= d3.line()(data.map((d, i) => [d.property.translateX + marginBtn*i, d.yScale(k[d.name])]))\r\n\t\t\t})\r\n\t\t\tpcp(__data)\r\n\t\t}\r\n\t\t//DrawHistograms(data, __data, true)\r\n    }\r\n\r\n    function dragZoom(k, _this, event){\r\n        let mousePosition = d3.pointer(event, _this)[0]\r\n        if(k.property.width + mousePosition > 10){\r\n            k.property.width += mousePosition\r\n            data.forEach(function(kk){\r\n                if(kk.property.order > k.property.order) kk.property.translateX += mousePosition\r\n            })\r\n            histAttrs.attr('transform', (k, i) => translate(k.property.translateX + marginBtn * k.property.order, 0))\r\n            otherAttrs.attr('transform', (k, i) => translate(k.property.translateX + marginBtn * k.property.order, 0))\r\n            d3.select(_this).attr('transform', translate(k.property.width ,0)).style('opacity', 1)\r\n        }\r\n    }\r\n\r\n    function dragZoomEnd(_this){\r\n        DrawHistograms(data, __data, true)\r\n    }\r\n\r\n    function addLine(_data){\r\n        let ids = new Set(_data.map(kk => kk['___id']))\r\n        __data.forEach(k => ids.has(k['___id']) ? k['___pcp'] = true : k['___pcp'])\r\n        pcp(__data)\r\n        setCallbacks(data, __data)\r\n    }\r\n    \r\n    function removeLine(_data){\r\n        let ids = new Set(_data.map(kk => kk['___id']))\r\n        __data.forEach(k => ids.has(k['___id']) ? k['___pcp'] = false : k['___pcp'])\r\n        pcp(__data)\r\n        setCallbacks(data, __data)\r\n    }\r\n}\r\n\r\nfunction pcp(data){\r\n    if(lastrq != undefined) lastrq.invalidate()\r\n    \r\n    let lines = data.filter(k => k['___pcp'] === true)\r\n    let canvas = document.getElementById('line')\r\n    \r\n    let ctx = canvas.getContext('2d')\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    \r\n    ctx.strokeStyle = 'lightgray'\r\n    ctx.lineWidth = 1\r\n    ctx.globalAlpha = 0.2\r\n\r\n    let rq = renderQueue(function(k){let p = new Path2D(k['___lineData']); ctx.stroke(p)})\r\n    rq.add(lines)\r\n    rq.render()\r\n    lastrq = rq\r\n}\r\n\r\n\r\nexport function pcp_hl(data, canvas_id, clear){\r\n    if(lastrq_highlight != undefined) lastrq_highlight.invalidate()\r\n\r\n    let lines = data\r\n    let canvas = document.getElementById(canvas_id)\r\n\tlet ctx = canvas.getContext('2d')\r\n\tif(clear)\r\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\t\r\n\t// ctx.strokeStyle = color ? color : '#000'\r\n\tctx.lineWidth = 0.5\r\n\tctx.globalAlpha = 0.1\r\n\tif(canvas_id == 'line_filter_highlight')\r\n\t\tctx.globalAlpha = 0.5\r\n\t// ctx.fillStyle = color ? color : '#fff'\r\n\r\n\tlet rq = renderQueue(function(k){let p = new Path2D(k.data['___lineData']); ctx.stroke(p);\r\n\t\tctx.strokeStyle = k.color ? k.color : '#000'})\r\n\trq.add(data)\r\n\trq.render()\r\n\tlastrq_highlight = rq\r\n\t\r\n    \r\n}\r\n\r\n\r\nexport function tableHover(datum){\r\n    let hoverArea = d3.select('#others').select('.line_hover')\r\n    hoverArea.html(\"\")\r\n    if(datum == null) return\r\n    hoverArea.append('path').attr('d', datum['___lineData'])\r\n}\r\n\r\nlet renderQueue = (function(func) {\r\n    var _queue = [],                  // data to be rendered\r\n        _rate = 75,                 // number of calls per frame\r\n        _invalidate = function() {},  // invalidate last render queue\r\n        _clear = function() {};       // clearing function\r\n  \r\n    var rq = function(data) {\r\n      if (data) rq.data(data);\r\n      _invalidate();\r\n      _clear();\r\n      rq.render();\r\n    };\r\n  \r\n    rq.render = function() {\r\n      var valid = true;\r\n      _invalidate = rq.invalidate = function() {\r\n        valid = false;\r\n      };\r\n  \r\n      function doFrame() {\r\n        if (!valid) return true;\r\n        var chunk = _queue.splice(0,_rate);\r\n        chunk.map(func);\r\n        timer_frame(doFrame);\r\n      }\r\n  \r\n      doFrame();\r\n    };\r\n  \r\n    rq.data = function(data) {\r\n      _invalidate();\r\n      _queue = data.slice(0);   // creates a copy of the data\r\n      return rq;\r\n    };\r\n  \r\n    rq.add = function(data) {\r\n      _queue = _queue.concat(data);\r\n    };\r\n  \r\n    rq.rate = function(value) {\r\n      if (!arguments.length) return _rate;\r\n      _rate = value;\r\n      return rq;\r\n    };\r\n  \r\n    rq.remaining = function() {\r\n      return _queue.length;\r\n    };\r\n  \r\n    // clear the canvas\r\n    rq.clear = function(func) {\r\n      if (!arguments.length) {\r\n        _clear();\r\n        return rq;\r\n      }\r\n      _clear = func;\r\n      return rq;\r\n    };\r\n  \r\n    rq.invalidate = _invalidate;\r\n  \r\n    var timer_frame = window.requestAnimationFrame\r\n      || window.webkitRequestAnimationFrame\r\n      || window.mozRequestAnimationFrame\r\n      || window.oRequestAnimationFrame\r\n      || window.msRequestAnimationFrame\r\n      || function(callback) { setTimeout(callback, 17); };\r\n  \r\n    return rq;\r\n  });\r\n\r\nlet lastrq\r\nlet lastrq_highlight\r\n\r\nfunction updateData(data, __data, pivot){\r\n    let newData = preprocess(__data, pivot)\r\n    newData.sort((a, b) => data.findIndex(k => k.name == a.name) - data.findIndex(k => k.name == b.name)) \r\n    newData.forEach(function(k, j){newData[j].property = data[j].property})\r\n    return newData\r\n}\r\nfunction setCallbacks(data, __data){\r\n    //SELECT\r\n    __data.forEach(k => k['___selected']!==false ? k['___pcp'] = true: k['___pcp'] = false)\r\n    d3.select('#currentSelected').text(__data.filter(k => k['___pcp']).length)\r\n    d3.select('#currentDisplayed').text(__data.filter(k => k['___selected']!==false).length)\r\n    d3.select('#resetSelection').on('click', function(event, k){\r\n        __data.forEach(k => k['___pcp'] = false)\r\n        DrawHistograms(data, __data, true)\r\n    })\r\n    d3.select('#selectItems').on('click', function(event, k){\r\n        __data.forEach(k => k['___selected']!==false ? k['___pcp'] = true: k['___pcp'] = false)\r\n        DrawHistograms(data, __data, true)\r\n    })\r\n\r\n    d3.select('#displayHist').on('click', function(event, k){\r\n        let node = d3.select(this).select('input')\r\n        let checked = node.property('checked')\r\n        console.log(checked)\r\n        if(checked){\r\n            d3.selectAll('.foregroundArea').style('display', 'none')\r\n            d3.selectAll('.backHistoSmall').style('display', 'none')\r\n            d3.selectAll('.backHistoArea').style('display', 'none')\r\n            d3.selectAll('.backHoverArea').style('display', 'none')\r\n            d3.select(this).select('.label-disable').style('display', 'none')\r\n            d3.select(this).select('.label-enable').style('display', 'block')\r\n        }\r\n        else{\r\n            d3.selectAll('.foregroundArea').style('display', 'block')\r\n            d3.selectAll('.backHistoSmall').style('display', 'block')\r\n            d3.selectAll('.backHistoArea').style('display', 'block')\r\n            d3.selectAll('.backHoverArea').style('display', 'block')\r\n            d3.select(this).select('.label-enable').style('display', 'none')\r\n            d3.select(this).select('.label-disable').style('display', 'block')\r\n        }\r\n    })\r\n\r\n    d3.select('#displayLines').on('click', function(event, k){\r\n        //drawHistograms(data, __data, true)\r\n        let node = d3.select(this).select('input')\r\n        let checked = node.property('checked')\r\n        if(checked){\r\n            d3.select('#line').style('visibility', 'hidden')\r\n            d3.select(this).select('.label-disable').style('display', 'none')\r\n            d3.select(this).select('.label-enable').style('display', 'block')\r\n        }\r\n        else{\r\n            pcp(__data)\r\n            //pcp_hl(GridOptions.api.getSelectedRows(), 'line_highlight', true)\r\n            d3.select('#line').style('visibility', 'visible')\r\n            d3.select(this).select('.label-enable').style('display', 'none')\r\n            d3.select(this).select('.label-disable').style('display', 'block')\r\n        }\r\n\r\n    })\r\n\r\n    //CONTROL\r\n    d3.select('#resetBrush').on('click', function(event, k){\r\n\t\tlet brushes = d3.select('#others').selectAll('.brush').property('__brush', null)\r\n\t\t\r\n\t\tbrush_dict.map(d => {\r\n\t\t\td.value = null;\r\n\t\t})\r\n\t\tconsole.log(brush_dict);\r\n\t\t\r\n\t\tstore.dispatch(SET_PHP_LINEUP_FILTER(brush_dict))\r\n\r\n        data.forEach(function(attr){\r\n            //if(attr['property']['___isBrushed']){\r\n                __data.forEach(function(k, i){\r\n                    __data[i]['___selected'] = true\r\n                    __data[i]['___brush'+attr.name] = undefined\r\n                })\r\n            //}\r\n            //else return\r\n        })\r\n        let pivot = data.filter(k => k.pivot)[0].name\r\n        let newData = updateData(data, __data, pivot)\r\n        DrawHistograms(newData, __data, true)\r\n    })\r\n\r\n    d3.select('#setBin').on('input', function(){\r\n        //\r\n        let pivot = data.filter(k => k.pivot)[0].name\r\n        let newData = updateData(data, __data, pivot)\r\n        DrawHistograms(newData, __data, false)\r\n    })\r\n    \r\n    d3.select('#setWidth').on('input', function(){\r\n        let newWidth = Math.max(Number(this.value), 10)\r\n        data.forEach(function(k, i){\r\n            data[i].property.width = newWidth\r\n            data[i].property.translateX = newWidth*i\r\n        })\r\n        DrawHistograms(data, __data, true)\r\n    })\r\n\r\n    d3.select('#setInnerZoom').on('input', function(){\r\n        let newScale = Math.max(Number(this.value), 1)\r\n        data.forEach(k => k.property.innerZoomRatio = newScale)\r\n        DrawHistograms(data, __data)\r\n    })\r\n\r\n    // d3.select('#enableGhost').on('click', function(event, k){\r\n    //     let node = d3.select(this).select('input')\r\n    //     let checked = node.property('checked')\r\n    //     if(checked){\r\n    //         d3.selectAll('.backHistoSmall').style('visibility', 'hidden')\r\n    //         d3.select(this).select('.label-disable').style('display', 'none')\r\n    //         d3.select(this).select('.label-enable').style('display', 'block')\r\n    //     }\r\n    //     else{\r\n    //         d3.selectAll('.backHistoSmall').style('visibility', 'visible')\r\n    //         d3.select(this).select('.label-enable').style('display', 'none')\r\n    //         d3.select(this).select('.label-disable').style('display', 'block')\r\n    //     }\r\n    // })\r\n\r\n    // d3.select('#enableGrayOut').on('click', function(event, k){\r\n    //     let node = d3.select(this).select('input')\r\n    //     let checked = node.property('checked')\r\n    //     if(checked){\r\n    //         //d3.selectAll('.backHistoSmall').style('visibility', 'hidden')\r\n    //         d3.select(this).select('.label-disable').style('display', 'none')\r\n    //         d3.select(this).select('.label-enable').style('display', 'block')\r\n    //     }\r\n    //     else{\r\n    //         //d3.selectAll('.backHistoSmall').style('visibility', 'visible')\r\n    //         d3.select(this).select('.label-enable').style('display', 'none')\r\n    //         d3.select(this).select('.label-disable').style('display', 'block')\r\n    //     }\r\n    //     drawHistograms(data, __data)\r\n    // })\r\n\r\n    d3.select('#resetInnerZoom').on('click', function(event, k){\r\n        data.forEach(function(k, i){\r\n            data[i].property.innerZoomRatio = 1\r\n        })\r\n        d3.select('#setInnerZoom').property('value', 1)\r\n        DrawHistograms(data, __data)\r\n    })\r\n\r\n    // d3.select('#tableControl').selectAll('label').on('click', function(event, k){\r\n    //     let id = d3.select(this).select('input').attr('id')\r\n    //     console.log(__data)\r\n    //     if(id == \"option_all\") generateTable(__data)\r\n    //     else if(id == \"option_disp\") generateTable(__data.filter(k => k['___selected'] !== false))\r\n    //     else generateTable(__data.filter(k => k['___pcp']))\r\n    // })\r\n}\r\n\r\n// export function generateTable(__data){\r\n//     d3.select('#table').html(\"\")\r\n//     pcp_hl([], 'line_highlight', true)\r\n//     let columnHeader = Object.keys(__data[0])\r\n//         .filter(k => (k[0] !=='_' || k[1] !== '_'))\r\n//         .map(function(k, i){\r\n//             let headerName\r\n//             if(k[0] === '_'){\r\n//                 if (k[1] === '*')  headerName = k.substring(2)\r\n//                 else headerName = k.substring(1)\r\n//             }\r\n//             else headerName = k\r\n            \r\n//             if(k[0]=== \"*\" || (k[0] === '_' && k[1] === '*')) return {headerName:headerName, field:k, pinned:'left'}\r\n//             else return {headerName: headerName, field: k}\r\n//         })\r\n    \r\n//     GridOptions = {\r\n//         columnDefs: columnHeader, \r\n//         rowData:__data.filter(k => k['___selected'] !== false),  \r\n//         enableSorting: true,\r\n//         enableFilter: true,\r\n//         enableColResize: true,\r\n//         onFirstDataRendered: onFirstDataRendered,\r\n//         rowSelection:'multiple',\r\n//         rowMultiSelectWithClick: true,\r\n//         onSelectionChanged: onSelectionChanged,\r\n//         onCellMouseOver: onCellMouseOver,\r\n//         onCellMouseOut: tableHover\r\n//     }\r\n    \r\n//     function onFirstDataRendered(params) {\r\n//         params.api.sizeColumnsToFit()\r\n//     }\r\n    \r\n//     function onSelectionChanged(){\r\n//         let selectedRows = GridOptions.api.getSelectedRows()\r\n//         pcp_hl(selectedRows, 'line_highlight', true)\r\n//     }\r\n    \r\n//     function onCellMouseOver(k){\r\n//         tableHover(k.data)\r\n//     }\r\n//     console.log(Grid);\r\n//     new Grid(document.querySelector('#table'), GridOptions)\r\n// }","import './css/PHP.css'\nimport { useEffect } from 'react';\nimport { globalData, fieldList } from \"./reducers/StaticData\";\nimport { DrawHistograms, preprocess, pcp_hl, tableHover } from './php_func'\nimport { useSelector, useDispatch } from \"react-redux\";\nimport lineup_filter from './reducers/lineup_filter';\n\nvar data = [];\n\nfunction PHP() {\n\t//var phpList = [\"CORR\",\"BACK_ENG_CORR\",\"BACK_FRA_CORR\",\"ENG_BLEU\",\"FRA_BLEU\",\"ENG_METEOR\",\"FRA_METEOR\",\"LENGTH_DIFF\",\"TOKEN_LENGTH_DIFF\",\"SENTENCE_LEN_DIFF\"];\n\tvar phpList = fieldList;\n  const filter_selected_id  = useSelector(state => state.lineup_filter)\n  const lineup_filter_state = useSelector(state => state.filter)\n  const php_lineup_state = useSelector(state => state.lineup_to_php)\n\tuseEffect(() => {\n\t\t// console.log(lineup_filter_state);\n\t\tlet filtered_data = [];\n\t\tlineup_filter_state.rev_filter_info.forEach(info => {\n\t\t\tinfo.filter_id.forEach(id => {\n\t\t\t\tdata.forEach(d => {\n\t\t\t\t\tif(d['___id'] == id)\n\t\t\t\t\t\tfiltered_data.push({data: d, color: info.rev_color})\n\t\t\t\t\t\t//filtered_data.push({data : d, color : info.rev_color});\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\t\tpcp_hl(filtered_data, 'line_filter', true)\n\n\t}, [lineup_filter_state])\n  useEffect(() => {\n\t//   console.log(filter_selected_id)\n\t  if(lineup_filter_state != null){\n\t\tif(filter_selected_id.rev_filter_id.length != 0 ){\n\t\t\tlet filtered_data = [];\n\t\t\tfilter_selected_id.rev_filter_id.forEach(filter_id => {\n\t\t\t\tconst filterInfo = lineup_filter_state.rev_filter_info.filter(d => d.id === filter_id)[0]\n\t\t\t\t\n\t\t\t\tfilterInfo.filter_id.forEach(id => {\n\t\t\t\t  data.forEach(d => {\n\t\t\t\t\t  if(d['___id'] == id)\n\t\t\t\t\t\t  filtered_data.push({data: d, color: filterInfo.rev_color});\n\t\t\t\t\t\t  //filtered_data.push({data : d, color: filterInfo.rev_color});\n\t\t\t\t  })\n\t\t\t\t})\n\n\t\t\t})\n\n\t\t\tpcp_hl(filtered_data, 'line_filter_highlight', true)\n\t\t  }\n\t\t  else\n\t\t\t  pcp_hl([], 'line_filter_highlight', true)\n\t  }\n  },[filter_selected_id])\n\n  useEffect(() => {\n    // console.log(php_lineup_state.mouseover_id)\n\tlet mouseover_data = null;\n    data.forEach(d => {\n\t\tif(d['___id'] == php_lineup_state.mouseover_id)\n\t\t\tmouseover_data = d;\n\t})\n\ttableHover(mouseover_data);\n  }, [php_lineup_state])\n\n  useEffect(() => {\n\tglobalData.forEach((d, i) => {\n\t\tlet pcpdata = {};\n\t\tphpList.forEach(attr => {\n\t\t\tpcpdata[attr] = d[attr];\n\t\t})\n\t\tpcpdata['___id'] = d['id'];\n\t\tdata.push(pcpdata);\n\t})\n\n      data.nColor = 10\n      let histData = preprocess(data, Object.keys(data[0]).filter(k => k[0] != '_')[0])\n      DrawHistograms(histData, data, true)\n  }, [])\n\n  return (\n    <div>\n      <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossOrigin=\"anonymous\" />\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/ag-grid-community/dist/styles/ag-grid.css\" />\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/ag-grid-community/dist/styles/ag-theme-balham.css\" />\n\n      <div className=\"container\"></div>\n      <div className=\"row\" style={{'text-align': 'left'}}>\n        <div className='col-md-12 col-sm-12 container ml-3'>\n          <div>\n            <div style={{ 'position': 'relative' }}>\n              <svg id='others' height='400px' style={{'float': 'left'}}>\n                <g className=\"line_hover\"></g>\n                <g className='wrapper'></g>\n                <g id='widgetArea'></g>\n              </svg>\n              <canvas id='line_highlight'></canvas>\n              <canvas id='line_filter'></canvas>\n              <canvas id='line_filter_highlight'></canvas>\n              <canvas id='line' style={{ \"visibility\": \"hidden\" }}></canvas>\n              <svg id='histogram' height='400px'>\n                <rect id='background'></rect>\n                <g className='wrapper'></g>\n              </svg>\n            </div>\n          </div>\n        </div>\n        {/* <div id='option' className='col-lg container mr-3'>\n          <div className='mt-2'> */}\n            {/* <h5 className='font-weight-bold'>Selection</h5>\n            <div className=\"form-group row mb-0\">\n              <label className=\"col-sm-6 col-form-label-sm\"><span id='currentDisplayed'>-</span> Items selected</label>\n              <div className=\"col-sm-6\">\n                <button id='resetBrush' type=\"button\" className=\"btn btn-outline-dark btn-sm btn-block\">Reset</button>\n              </div>\n            </div>\n            <div className=\"form-group row mb-0 mt-2\">\n              <label className=\"col-sm-6 col-form-label-sm\">Display PCP</label>\n              <div className=\"btn-group-toggle col-sm-6\" data-toggle=\"buttons\">\n                <label id='displayLines' className=\"btn btn-outline-dark btn-sm btn-block\">\n                  <input type=\"checkbox\" autoComplete=\"off\" />\n                  <span className=\"label-enable\">Enable</span>\n                  <span className=\"label-disable\" style={{ \"display\": \"none\" }}>Disable</span>\n                </label>\n              </div>\n              <label className=\"col-sm-6 col-form-label-sm\">Display PHP</label>\n              <div className=\"btn-group-toggle col-sm-6\" data-toggle=\"buttons\">\n                <label id='displayHist' className=\"btn btn-outline-dark btn-sm btn-block active\">\n                  <input type=\"checkbox\" autoComplete=\"off\" defaultChecked />\n                  <span className=\"label-enable\" style={{ \"display\": \"none\" }}>Enable</span>\n                  <span className=\"label-disable\">Disable</span>\n\n                </label>\n              </div>\n            </div>\n\n            <h5 className='font-weight-bold mt-3'>Control Panel</h5>\n            <div className=\"form-group row mt-2 mb-0\">\n              <label className=\"col-sm-6 col-form-label-sm\">Hist. # Bin (&gt10) </label>\n              <div className=\"col-sm-6\">\n                <input id='setBin' type=\"number\" className=\"form-control form-control-sm\" placeholder=\"50\" min=\"10\" />\n              </div>\n            </div>\n            <div className=\"form-group row mt-0 mb-0\">\n              <label className=\"col-sm-6 col-form-label-sm\">Hist. Width (&gt10) </label>\n              <div className=\"col-sm-6\">\n                <input id='setWidth' type=\"number\" className=\"form-control form-control-sm\" placeholder=\"80\" min=\"10\" />\n              </div>\n            </div>\n            <div className=\"form-group row mb-0\">\n              <label className=\"col-sm-6 col-form-label-sm\">Inner Zoom (&gt1)</label>\n              <div className=\"col-sm-6\">\n                <input id='setInnerZoom' type=\"number\" className=\"form-control form-control-sm\" placeholder=\"1\" min=\"1\" />\n              </div>\n            </div>\n            <button id='resetInnerZoom' type=\"button\" className=\"btn btn-outline-dark btn-sm btn-block\">Reset Inner Zoom</button> */}\n            {/* <div className=\"form-group row mb-0 mt-2\">\n              <label className=\"col-sm-6 col-form-label-sm\">Ghost Bars</label>\n              <div className=\"btn-group-toggle col-sm-6\" data-toggle=\"buttons\">\n                <label id='enableGhost' className=\"btn btn-outline-dark btn-sm btn-block active\">\n                  <input type=\"checkbox\" defaultChecked autoComplete=\"off\" />\n                  <span className=\"label-enable\" style={{ \"display\": \"none\" }}>Enable</span>\n                  <span className=\"label-disable\">Disable</span>\n\n                </label>\n              </div>\n            </div> */}\n            {/* <div className=\"form-group row mb-0 mt-0\">\n              <label className=\"col-sm-6 col-form-label-sm\">Gray Out Maxed</label>\n              <div className=\"btn-group-toggle col-sm-6\" data-toggle=\"buttons\">\n                <label id='enableGrayOut' className=\"btn btn-outline-dark btn-sm btn-block active\">\n                  <input type=\"checkbox\" defaultChecked autoComplete=\"off\" />\n                  <span className=\"label-enable\" style={{ \"display\": \"none\" }}>Enable</span>\n                  <span className=\"label-disable\">Disable</span>\n\n                </label>\n              </div>\n            </div> */}\n\n          {/* </div>\n\n        </div> */}\n      </div>\n      {/* <script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\" integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\" crossOrigin=\"anonymous\"></script>\n      <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossOrigin=\"anonymous\"></script>\n      <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js\" integrity=\"sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy\" crossOrigin=\"anonymous\"></script> */}\n    </div>\n  );\n}\n\nexport default PHP;\n","import * as React from 'react'\nimport { numberStatsGenerator, FilterRangeHistogram, FilterRangeBoxPlot, BoxPlot } from '@lineup-lite/components';\n\nimport { colorScaleMap } from \"./reducers/StaticData\";\n\nimport * as d3 from \"d3\"\n// import boxplot_data from \"./extractor/boxplot.csv\"\n\nfunction MyBoxPlot({field,data}) {\n    const compute = numberStatsGenerator();\n    const stats = compute(data);\n    stats.color = colorScaleMap[field]\n    \n    console.log(stats)\n  \n    // const [filterValue, setFilter] = React.useState(null);\n    // const filtered = filterValue\n    //   ? data.filter(\n    //       (d) => (filterValue[0] == null || filterValue[0] <= d) && (filterValue[1] == null || d <= filterValue[1])\n    //     )\n    //   : data;\n    // const filteredStats = numberStatsGenerator({ min: stats.min, max: stats.max })(filtered);\n  \n    return (\n      <div style={{marginLeft:15, marginRight:15, marginTop:1, marginBottom:1}}>\n        <h6 ><span style={{fontSize:'smaller'}}>{field}</span></h6>\n\n        <BoxPlot \n          s={stats}\n          summary\n          style={{height:5}\n        }\n        />\n      </div>\n    );\n  }\n\n\n  export default MyBoxPlot","import * as React from 'react';\nimport Box from '@mui/material/Box';\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\n\nconst bull = (\n  <Box\n    component=\"span\"\n    sx={{ display: 'inline-block', mx: '2px', transform: 'scale(0.8)' }}\n  >\n    \n  </Box>\n);\n\nfunction MetricCard({title, info}) {\n    // console.log(info)\n\n    \n    const avg = info[2].toFixed(2)\n    const max = info[0].toFixed(2)\n    const min = info[1].toFixed(2)\n\n  return (\n      <div>\n    <Card sx={{ minWidth: 100}}>\n      \n      <Typography variant=\"h7\" component=\"div\">\n          {title}\n        </Typography>\n          \n        <Typography sx={{ fontSize: 14 }} color=\"text.secondary\" gutterBottom>\n          Avg : {avg}\n        </Typography>\n        \n        <Typography sx={{ mb: 0.5, fontSize:12 }} color=\"text.secondary\">\n          MAX : {max}\n          <br/>\n          Min : {min}\n        </Typography>\n      \n    </Card>\n    </div>\n\n  );\n}\n\nexport default MetricCard","import * as React from 'react';\nimport { UserDispatch, globalData, fieldList, colorScaleMap } from \"./reducers/StaticData\";\nimport MyBoxPlot from './MyBoxPlot'\nimport Grid from '@mui/material/Grid';\nimport Paper from '@mui/material/Paper';\nimport { styled } from '@mui/material/styles';\nimport Typography from '@mui/material/Typography';\nimport Card from '@mui/material/Card';\nimport Title from './Title'\n\nimport { numberStatsGenerator, Histogram, BoxPlot, BoxPlotArray } from '@lineup-lite/components';\nimport MetricCard from \"./MetricCard\"\nfunction maxMinAvg(arr) {\n  var max = arr[0];\n  var min = arr[0];\n  var sum = arr[0]; //changed from original post\n  for (var i = 1; i < arr.length; i++) {\n    if (arr[i] > max) {\n      max = arr[i];\n    }\n    if (arr[i] < min) {\n      min = arr[i];\n    }\n    sum = sum + arr[i];\n  }\n  return [max, min, sum / arr.length]; //changed from original post\n}\n\n\nconst Item = styled(Paper)(({ theme }) => ({\n  ...theme.typography.body2,\n  padding: theme.spacing(1),\n  textAlign: 'center',\n  color: theme.palette.text.secondary,\n}));\n\n\nconst BasicInfo = () => {\n\n\n  const totalNum = globalData.length\n  const langauge = \"ENG <-> FRA\"\n\n  var dataMap = {}\n  fieldList.forEach(key => {\n    dataMap[key] = []\n  })\n\n\n  globalData.forEach(row => {\n    fieldList.forEach(key => {\n      dataMap[key].push(row[key])\n    })\n  })\n\n  const compute = numberStatsGenerator();\n  const data = [\n    [10, 20, 40, 30, 15],\n    [21, 39, 25, 42, 18],\n    [16, 44, 30, 32, 31],\n    [39, 50, 43, 32, 24],\n    [36, 19, 37, 38, 17],\n  ];\n\n  var infoMap = {}\n  Object.keys(dataMap).forEach(key => {\n    const result = maxMinAvg(dataMap[key])\n    infoMap[key] = result\n  })\n\n  // console.log(infoMap)\n  // const stats = compute(data);\n\n  // const vs = data[0].map((_, i) => compute(data.map((d) => d[i])));\n\n\n  return (\n    <div>\n\n      <Card sx={{ minWidth: 100 }}>\n        <Typography sx={{ fontSize: 20, color: \"text.primary\", fontWeight: 'medium' }} gutterBottom>\n          Dataset : WMT 2020 Bio\n        </Typography>\n\n\n\n\n        <Typography sx={{ fontSize: 18, color: \"text.secondary\", fontWeight: 'fontWeightLight' }} gutterBottom>\n          Source Language : English\n        </Typography>\n\n\n\n\n        <Typography sx={{ fontSize: 18, color: \"text.secondary\", fontWeight: 'fontWeightLight' }} gutterBottom>\n          Target Language : French\n        </Typography>\n\n\n\n\n        <Typography sx={{ fontSize: 18, color: \"text.secondary\", fontWeight: 'fontWeightLight' }} gutterBottom>\n          Total # of row : 50,000\n        </Typography>\n      </Card>\n{/* \n      <div>\n        <br />\n\n        <Title> Quartile & Outlier Information</Title>\n        <Card sx={{ minWidth: 100 }}>\n\n          {Object.keys(dataMap).map(key => {\n            const myData = dataMap[key]\n            return <MyBoxPlot field={key} data={myData}></MyBoxPlot>\n          })}\n\n          <br />\n        </Card>\n      </div>  */}\n      <br/>\n      <div>\n        <Grid container item spacing={2}>\n\n          {Object.keys(infoMap).map(key => {\n            return <Grid item xs={6} xl={6}> <MetricCard title={key} info={infoMap[key]}> </MetricCard>    </Grid>\n          })}\n        </Grid>\n\n\n      </div>\n    </div>\n  )\n\n\n  // return (\n  //     <div>\n  //               {/* <BoxPlotArray value={vs} format={stats.format} scale={stats.scale} color={stats.color} style={{ height: 100 }} summary  /> */}\n\n  //         <h4>Total Num of dataset : {totalNum}</h4>\n  //         {Object.keys(dataMap).map(key => {\n  //             const myData = dataMap[key]\n  //             return <MyBoxPlot field={key} data = {myData}></MyBoxPlot> \n  //         })}\n\n\n\n  //     </div>\n  // )\n}\n\nexport default BasicInfo\n","import React, { useRef, useEffect, useContext, useState } from \"react\";\nimport * as d3 from \"d3\";\n\nimport { useSelector, useDispatch } from \"react-redux\";\n// import { increseCount } from \"./reducers/\";\nimport MenuItem from '@mui/material/MenuItem';\nimport Select from '@mui/material/Select';\nimport { globalData, fieldList, colorScaleMap, fieldList_text } from './reducers/StaticData'\nimport FormHelperText from '@mui/material/FormHelperText';\nimport FormControl from '@mui/material/FormControl';\nimport InputLabel from '@mui/material/InputLabel';\n\n// import { UserDispatch, globalData, fieldList, colorScaleMap } from \"./context/DataProvider\";\n\nconst CanvasScatter = () => {\n\n\n\n    const [x_option, set_x_option] = useState(fieldList[1])\n    const [y_option, set_y_option] = useState(fieldList[2])\n\n\n\n\n    const dispatch = useDispatch();\n    const state = useSelector(state => state.filter);\n\n    const splotSvg = useRef(null);\n    const divRef = useRef(null);\n\n    const data = globalData\n    const isSavedFiltered = state.isSavedFiltered\n\n\n\n    const width = 240\n\tconst height = 200\n    const margin = { left: 80, right: 20, top: 20, down: 50 }\n\n\n    const divwidth = width + margin.left + margin.right\n    const divheight = height + margin.top + margin.down\n\n\n    let x_min = d3.min(data, d => +(d[x_option]));\n    let x_max = d3.max(data, d => +(d[x_option]));\n    let y_min = d3.min(data, d => +(d[y_option]));\n    let y_max = d3.max(data, d => +(d[y_option]));\n\n    var x = d3.scaleLinear().domain([x_min, x_max]).range([0, width]) // [45, 425]\n    var y = d3.scaleLinear().domain([y_min, y_max]).range([height, 0])  // [330,]\n    const radius = 1\n\n    const createMenuItem = () => {\n        const menu_item_list = fieldList.map(field => {\n            return (\n                <MenuItem style={{fontSize:\"0.6em\"}} value={field}>{fieldList_text[field]}</MenuItem>\n            )\n        })\n        console.log(menu_item_list)\n        return menu_item_list\n    }\n\n    const handle_x_change = (event) => {\n        set_x_option(event.target.value);\n    };\n\n    const handle_y_change = (event) => {\n        set_y_option(event.target.value);\n    };\n\n\n    useEffect(() => {\n        // TODO\n        //        console.log(\"USE Effect\")\n\n        d3.select(splotSvg.current).selectAll(\"*\").remove();\n        d3.select(divRef.current).selectAll(\"*\").remove()\n\n\n\n\n\n        var axis_x = d3.axisBottom(x);\n        var axis_y = d3.axisLeft(y);\n\n        let svg = d3.select(splotSvg.current)\n\n        svg.append(\"g\")\n            .attr(\"id\", \"axis_x\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + (height + margin.top) + \")\")\n            .call(axis_x);\n        svg.append(\"g\")\n            .attr(\"id\", \"axis_y\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n            .call(axis_y);\n\n\n\n        svg.append('text')\n            .attr('x', `-${divwidth / 2}`)\n            .attr('y', `${margin.left / 2}`)\n            .attr('transform', 'rotate(-90)')\n            .text(fieldList_text[x_option])\n            .attr(\"font-size\",\"smaller\")\n        svg.append('text')\n            .attr('x', `${divwidth / 2}`)\n            .attr('y', `${divheight - margin.down / 4 }`)\n            .text(fieldList_text[y_option])\n            .attr(\"font-size\",\"smaller\")\n\n\n        svg = svg.append(\"g\").attr(\"id\", d => \"scatter_plot\").attr(\"transform\", \"translate(\" + margin.left + \", \" + margin.top + \")\")\n\n        var myCanvas = d3.select(divRef.current).append(\"canvas\").attr(\"width\", width).attr(\"height\", height)\n            .style('margin-left', margin.left + 'px')\n            .style('margin-top', margin.top + 'px')\n\n        const context = myCanvas.node().getContext('2d');\n\n        data.forEach(d => {\n            const point1 = d[x_option]\n            const point2 = d[y_option]\n            drawPoint([point1, point2])\n        })\n\n        function drawPoint(point) {\n            context.beginPath();\n            context.globalAlpha = 0.5\n\n            context.fillStyle = \"lightgrey\";\n            const px = x(point[0]);\n            const py = y(point[1]);\n\n            context.arc(px, py, 1.2, 0, 2 * Math.PI, true);\n            context.fill();\n        }\n\n\n\n\n    }, [x_option, y_option]);\n\n    useEffect(() => {\n        // console.log(\"isSavedFilter\")\n        const mySvg = d3.select(\"#scatter_plot\")\n        // const rowList = []\n        // state..forEach(idx => {\n        //     rowList.push(globalData[idx])\n        // })\n        const filter_info = state.rev_filter_info\n\n        const groups = mySvg.selectAll(\"g\").data(filter_info, d => d.id).join(\"g\")\n        groups.selectAll(\"circle\").data(d => {\n            return d.filter_id.map(d => globalData[d])\n        }).join(\"circle\").attr(\"r\", radius + 1)\n            .attr(\"cx\", d => x(d[x_option])).attr(\"cy\", d => y(d[y_option])).attr(\"fill\", function (d, i) {\n                const pData = d3.select(this.parentNode).datum()\n                // console.log(pData.rev_color)\n                return pData.rev_color\n            })\n            .attr(\"stroke-width\", d => 1)\n\n    }, [state, x_option, y_option])\n\n    return (\n        <div>\n            <div style={{textAlign:\"center\"}}>\n                <div style={{ display: \"inline-block\" }}>\n                    <FormControl sx={{ m: 1, minWidth: 120 }}>\n                        <InputLabel id=\"x_axis_label\">x_axis</InputLabel>\n\n                        <Select\n                            labelId=\"x-option-select-label\"\n                            id=\"x-option-select\"\n                            value={x_option}\n                            label=\"Language\"\n                            onChange={handle_x_change}\n                            style={{fontSize:\"0.6em\"}}\n                        >\n                            {createMenuItem()}\n\n                        </Select>\n\n                    </FormControl>\n                </div>\n                <div style={{ display: \"inline-block\" }}>\n                    <FormControl sx={{ m: 1, minWidth: 120 }}>\n                        <InputLabel id=\"y_axis_label\">y_axis</InputLabel>\n\n                        <Select\n                            labelId=\"y-option-select-label\"\n                            id=\"y-option-select\"\n                            value={y_option}\n                            label=\"Language\"\n                            onChange={handle_y_change}\n                            style={{fontSize:\"0.6em\"}}\n                        >\n                            {createMenuItem()}\n\n                        </Select>\n                    </FormControl>\n\n                </div>\n            </div>\n\n            <div style={{ width: divwidth, height: divheight, position:\"relative\" }} >\n                <div ref={divRef} style = {{position: \"absolute\"}}></div>\n                <svg ref={splotSvg} width={divwidth} height={divheight} style={{ position: \"absolute\", top : 0, left : 0 }}>\n                </svg>\n\n            </div>\n        </div>\n    )\n};\n\nexport default CanvasScatter;","import React, { useEffect, useRef, useState, useContext } from 'react'\nimport { DataGrid } from '@mui/x-data-grid';\nimport { useParams } from \"react-router-dom\"\nimport { styled } from '@mui/material/styles';\n\n// import { UserDispatch, globalData, fieldList, colorScaleMap } from \"./context/DataProvider\";\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Grid from '@mui/material/Grid';\nimport Title from './Title'\nimport \"./TextCompare.css\"\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport { globalData, fieldList, colorScaleMap, lang } from './reducers/StaticData'\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { FixedSizeList, VariableSizeList } from 'react-window';\nimport Divider from '@mui/material/Divider';\n\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\n\nconst Item = styled(Paper)(({ theme }) => ({\n    ...theme.typography.body2,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n}));\n\nfunction TextCompare() {\n\n    const dispatch = useDispatch()\n    // const { state, dispatch } = useContext(UserDispatch);\n\n    const state = useSelector(state => state.text_compare)\n    const mouse_over_state = useSelector(state => state.mouseover_to_text)\n    const [option, setOption] = React.useState(1);\n\n    const handleChange = (event, value) => {\n        console.log(value)\n        setOption(value);\n    };\n\n    const id_list = state.text_compare_id\n    const listRef = React.createRef();\n    // var heightList = []\n\n\n    // console.log(option)\n    // var test_data = globalData[id].ngram\n    // var ngram_eng_original = test_data.ngram_eng_original\n    // var ngram_eng_back = test_data.ngram_eng_back\n\n    // var ngram_fra_original = test_data.ngram_fra_original\n    // var ngram_fra_back = test_data.ngram_fra_back\n\n    // console.log(ngram_eng_original)\n    // console.log(ngram_eng_back)\n\n    useEffect(() => {\n        // console.log(mouse_over_state)\n        listRef.current.scrollToItem(mouse_over_state.text_focus_id - 1, \"start\");\n    }, [mouse_over_state])\n\n    function createLegend() {\n        return (\n            <div class=\"legend-container\" style={{ justifyContent: 'center' }}>\n                <div class=\"legend-ngram ngram_0\"> <span style={{ color: 'grey', fontSize: '1.2em' }}>Not Match </span></div>\n                <div class=\"legend-ngram ngram_1\"> <span style={{ fontSize: '1.2em' }}>Unigram </span></div>\n                <div class=\"legend-ngram ngram_2\"> <span style={{ fontSize: '1.2em' }}>Bigram </span></div>\n                <div class=\"legend-ngram ngram_3\"> <span style={{ fontSize: '1.2em' }}>3-gram </span></div>\n                <div class=\"legend-ngram ngram_4\"> <span style={{ fontSize: '1.2em' }}>4-gram </span></div>\n\n            </div>\n        )\n    }\n\n    function makeColorString(original) {\n        // console.log(original)\n        return (\n            <div >\n                {original.map(d => {\n                    const subjectClass = \"ngram_\" + d.n_gram\n                    const str = d.token\n                    return <span className={subjectClass}>{str} <span className=\"none\">&nbsp;</span></span>\n                })}\n            </div>\n        )\n    }\n\n    function makeNormalString(original) {\n        // console.log(original)\n        return (<span className=\"ngram_0\">{original}</span>)\n    }\n\n    function makeCompareView() {\n        // console.log(\"Compare View\")\n        var textList = []\n\n        var src_lang = \"\"\n        var target_lang = \"\"\n        if (option === 1)    // Eng <-> Back ENG\n        {\n            id_list.forEach(e_id => {\n                var test_data = globalData[e_id].ngram\n                // console.log(test_data)\n                var original = makeColorString(test_data.ngram_eng_original)\n                var back = makeColorString(test_data.ngram_eng_back)\n                textList.push([original, back])\n\n\n            })\n            src_lang = \"English\"\n            target_lang = \"English Back-tranlsated\"\n\n        }\n        else if (option === 2) // FRA <-> BACK FRA\n        {\n            id_list.forEach(e_id => {\n\n                var test_data = globalData[e_id].ngram\n                var original\n                var back\n\t\t\t\tif(lang == \"FRA\"){\n\t\t\t\t\toriginal = makeColorString(test_data.ngram_fra_original)\n\t\t\t\t\tback = makeColorString(test_data.ngram_fra_back)\n\t\t\t\t}else{\n\t\t\t\t\toriginal = makeColorString(test_data.ngram_kor_original)\n\t\t\t\t\tback = makeColorString(test_data.ngram_kor_back)\n\t\t\t\t}\n                textList.push([original, back])\n            })\n\t\t\tsrc_lang = (lang == \"FRA\") ? \"France\" : \"Korean\"\n\t\t\ttarget_lang = (lang == \"FRA\") ? \"France Back-translated\" : \"Korean Back-translated\"\n        }\n        else {      // ENG <-> FRA\n            id_list.forEach(e_id => {\n\n                var test_data = globalData[e_id]\n                var original = makeNormalString(test_data.ENG_SENTENCE)\n                var back = makeNormalString((lang == \"FRA\") ? test_data.FRA_SENTENCE : test_data.KOR_SENTENCE)\n                textList.push([original, back])\n            })\n            src_lang = \"English\"\n            target_lang = (lang == \"FRA\") ? \"France\" : \"Korean\"\n\n        }\n        return (\n            <div>\n                {id_list.map((tmp_id, i) => {\n                    return createCard(tmp_id, src_lang, target_lang, textList[i][0], textList[i][1])\n                })}\n                {/* {original.map(d => {\n                    const subjectClass = \"ngram_\" + d.n_gram\n                    const str = d.token\n                    return <span className={subjectClass}>{str} <span className=\"ngram_0\">&nbsp;</span></span>\n                })} */}\n            </div>\n        )\n    }\n\n    function makeCompareList() {\n        var textList = []\n\n        var src_lang = \"\"\n        var target_lang = \"\"\n        // heightList = []\n\n        if (option === 1)    // Eng <-> Back ENG\n        {\n            id_list.forEach(e_id => {\n                var test_data = globalData[e_id].ngram\n                // console.log(test_data)\n                var original = makeColorString(test_data.ngram_eng_original)\n                var back = makeColorString(test_data.ngram_eng_back)\n                textList.push([original, back])\n                // let tmp_height = +(((globalData[e_id].ENG_SENTENCE.length + globalData[e_id].ENG_SENTENCE.split(\" \").length) / 40) * 25)\n                // tmp_height+= +(((globalData[e_id].BACK_ENG_SENTENCE.length + globalData[e_id].BACK_ENG_SENTENCE.split(\" \").length) / 40) * 25)\n                // tmp_height += 250   // default value\n                // // console.log(tmp_height)\n                // heightList.push(tmp_height)\n\n            })\n            src_lang = \"English Original\"\n            target_lang = \"English tranlsated\"\n\n        }\n        else if (option === 2) // FRA <-> BACK FRA\n        {\n            id_list.forEach(e_id => {\n\n                var test_data = globalData[e_id].ngram\n\t\t\t\tvar original = makeColorString((lang == \"FRA\") ? test_data.ngram_fra_original : test_data.ngram_fra_original)\n                var back = makeColorString((lang == \"FRA\") ? test_data.ngram_fra_back : test_data.ngram_fra_back)\n                textList.push([original, back])\n            })\n\t\t\tsrc_lang = (lang == \"FRA\") ? \"France Original\" : \"Korean Original\"\n\t\t\ttarget_lang = (lang == \"FRA\") ? \"France translated\" : \"Korean translated\"\n\n        }\n        else {      // ENG <-> FRA\n\n            id_list.forEach(e_id => {\n\n                var test_data = globalData[e_id]\n                var original = test_data.ENG_SENTENCE\n                var back = makeNormalString((lang == \"FRA\")? test_data.FRA_SENTENCE : test_data.KOR_SENTENCE)\n                textList.push([original, back])\n            })\n            src_lang = \"English\"\n            target_lang = (lang == \"FRA\") ? \"France\" : \"Korean\"\n\n        }\n        return id_list.map((tmp_id, i) => {\n            return createCard((i + 1), src_lang, target_lang, textList[i][0], textList[i][1])\n        })\n\n\n    }\n\n    const rowList = React.useMemo(() => makeCompareList(), [state, option])\n    // console.log(rowList)\n    const Row = ({ index, style }) => {\n        // console.log(style)\n        return (\n\n            <div style={style}>\n                {rowList[index]}\n            </div>\n        )\n    }\n        ;\n\n    const getItemSize = index => {\n\n        // return heightList[index]\n        return 500;\n    };\n\n\n    function createCard(id, src_language, target_language, original, back) {\n        // const original_label = language + \" original\"\n        // const back_label = language + \" back-translated\"\n        return (\n            <div style={{ margin: 20 }}>\n                <Typography sx={{ fontSize: 14 }} color=\"text.secondary\" gutterBottom>\n                    Rank : {id}\n                </Typography>\n                <Card variant=\"outlined\">\n                    <CardContent style={{padding:10, height:200}}>\n                        <Typography sx={{ fontSize: '1em' }} variant=\"h6\" component=\"div\">\n                            {src_language}\n                        </Typography>\n                        <Typography sx={{ fontSize: '0.8em' }}  align='left' variant=\"body2\" paragraph={true}>\n                            <br />\n                            {original}\n                        </Typography>\n\n                    </CardContent>\n                    <Divider />\n                    <CardContent style={{padding:10, height:200}}>\n                        <Typography sx={{ fontSize: '1em' }} variant=\"h6\" component=\"div\">\n                            {target_language}\n                        </Typography>\n                        <Typography sx={{ fontSize: '0.8em' }} align='left' variant=\"body2\">\n                            <br />\n                            {back}\n                        </Typography>\n                    </CardContent>\n                </Card>\n            </div>\n        )\n    }\n\n\n\n    return (\n        <div style={{ textAlign: 'center' }}>\n            {/* need to replace toggle button */}\n            <Title> Text Compare View</Title>\n            <div>\n                <ToggleButtonGroup\n                    color=\"primary\"\n                    value={option}\n                    exclusive\n                    onChange={handleChange}\n                    style={{ fontSize: \"1em\" }}\n                >\n                    <ToggleButton style={{ fontSize: \"0.6em\" }} value={1}>ENG</ToggleButton>\n                    <ToggleButton style={{ fontSize: \"0.6em\" }} value={2}>{(lang == \"FRA\")? \"FRA\" : \"KOR\"}</ToggleButton>\n                    <ToggleButton style={{ fontSize: \"0.6em\" }} value={3}>Original</ToggleButton>\n                </ToggleButtonGroup>\n            </div>\n\n            <br />\n            {createLegend()}\n            <br />\n            {/* {makeCompareView()} */}\n            <div>\n                <FixedSizeList ref={listRef}\n                    height={560}\n                    itemCount={rowList.length}\n                    itemSize={490}\n\n                >\n                    {Row}\n                </FixedSizeList>\n            </div>\n\n\n        </div>\n    )\n\n}\n\nexport default TextCompare","import React, { useEffect } from 'react'\nimport * as d3 from 'd3'\nimport { useSelector, useDispatch } from \"react-redux\";\nimport d3Tip from \"d3-tip\";\n\nfunction FilterBundling() {\n\tconst dispatch = useDispatch()\n\tconst state = useSelector(state => state.filter)\n\n\tvar diameter = 297,\n\tradius = diameter / 2,\n\tinnerRadius = radius - 100; // between center and edge end\n\n\tuseEffect(() => {\n\t\t\n\t\tvar svg = d3.select(\"#filterbundling\").append(\"svg\")\n\t\t\t.attr(\"width\", diameter)\n\t\t\t.attr(\"height\", diameter)\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"transform\", \"translate(\" + diameter / 2 + \",\" + diameter / 2 + \")\");\n\n\t\tsvg.append(\"g\").attr(\"class\", \"link\")\n\t\tsvg.append(\"g\").attr(\"class\", \"label\")\n\t\tsvg.append(\"g\").attr(\"class\", \"bubble\")\n\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif(state.rev_filter_info.length == 0) return;\n\t\t// Some constants controlling the graph appearance\n\t\tconst PADDING_BUBBLE = 30 // distance between edge end and bubble\n\t\tconst PADDING_LABEL = 40 // distance between edge end and engineer name\n\t\tconst BUBBLE_SIZE_MIN = 6\n\t\tconst BUBBLE_SIZE_MAX = 40\n\t\tconst LINK_STROKE_MIN = 2\n\t\tconst LINK_STROKE_MAX = 10\n\n\t\t// The 'cluster' function takes 1 argument as input. It also has methods (??) like cluster.separation(), cluster.size() and cluster.nodeSize()\n\t\tvar cluster = d3.cluster()\n\t\t\t.size([360, innerRadius]);\n\n\t\tvar line = d3.lineRadial()\n\t\t\t.curve(d3.curveBundle.beta(0.95))\n\t\t\t.radius(function (d) { return d.y; })\n\t\t\t.angle(function (d) { return d.x / 180 * Math.PI; });\n\n\t\tvar svg = d3.select(\"#filterbundling\").select(\"svg\").select(\"g\");\n\n\t\tsvg.select(\"g.link\").selectAll(\".link\").remove()\n\t\tsvg.select(\"g.label\").selectAll(\".label\").remove()\n\t\tsvg.select(\"g.bubble\").selectAll(\".bubble\").remove()\n\t\t\n\t\tvar link = svg.select(\"g.link\").selectAll(\".link\"),\n\t\t\tlabel = svg.select(\"g.label\").selectAll(\".label\"),\n\t\t\tbubble = svg.select(\"g.bubble\").selectAll(\".bubble\");\n\t\t\t\n\t\t// Add a scale for bubble size\n\n\n\t\tconst data = state.rev_filter_info;\n\n\t\t// console.log(data);\n\t\tconst hierarchicalData = data.map(d => {\n\t\t\tvar bundle = {};\n\t\t\tbundle.id = \".\" + d.id;\n\t\t\tbundle.name = d.name;\n\t\t\tbundle.size = d.filter_id.length;\n\t\t\tbundle.filter_id = d.filter_id;\n\t\t\tbundle.color = d.rev_color;\n\t\t\tbundle.imports = [];\n\t\t\tdata.forEach(d2 => {\n\t\t\t\tlet intersection = d.filter_id.filter(x => d2.filter_id.includes(x));\n\t\t\t\tlet count = intersection.length;\n\t\t\t\tif(count != 0 && d.id != d2.id)\n\t\t\t\t\tbundle.imports.push({\"id\": \".\" + d2.id, \"count\": count, \"intersection\" : intersection})\n\t\t\t});\n\t\t\treturn bundle;\n\t\t});\n\n\t\t\t// If wanna see your data\n\t\t\t// console.log(hierarchicalData)\n\n\t\t\t// Reformat the data\n\t\t\tvar root = packageHierarchy(hierarchicalData)\n\t\t\t\t//debugger;\n\t\t\t\t.sum(function (d) { return d.size; });\n\t\t\t// console.log(root)\n\n\t\t\t// Build an object that gives feature of each leaves\n\t\t\tcluster(root);\n\t\t\tlet leaves = root.leaves()\n\t\t\tif(leaves.length == 1)\n\t\t\t\tleaves[0].x = 0\n\t\t\t// let angle_diff = leaves[0].x;\n\t\t\t// leaves.map(d => {\n\t\t\t// \tconsole.log(d)\n\t\t\t// \td.x -= angle_diff;\n\t\t\t// \treturn d;\n\t\t\t// })\n\t\t\t// console.log(leaves)\n\t\t\tvar bubbleSizeScale = d3.scaleLinear()\n\t\t\t\t.domain([1, d3.max(leaves, d => d.value)])\n\t\t\t\t.range([BUBBLE_SIZE_MIN, BUBBLE_SIZE_MAX]);\n\n\n\t\t\tvar linkStrokeScale = d3.scaleLinear()\n\t\t\t.domain([1, d3.max(packageImports(leaves), d => d.weight)])\n\t\t\t.range([LINK_STROKE_MIN, LINK_STROKE_MAX]);\n\t\t\t// console.log(packageImports(leaves));\n\n\t\t\td3.selectAll(\".tip-link\").remove()\n\t\t\tvar tip_link = d3Tip().attr('class', 'd3-tip tip-link')\n\t\t\t\t.offset([-20, 0])\n\t\t\t\t.html(function(event, d) {\n\t\t\t\t\td3.select(event.target).attr(\"stroke\", \"red\");\n\t\t\t\t\ttip_link.style(\"margin-left\", (parseFloat((d3.select(\".tip-link\").style(\"left\"))) - 960) / 4 + \"px\")\n\t\t\t\t\ttip_link.style(\"margin-top\", parseFloat((d3.select(\".tip-link\").style(\"top\"))) / 4 + \"px\")\n\t\t\t\t\treturn 'Count : ' + d.weight;\n\t\t\t\t})\n\n\t\t\tsvg.call(tip_link);\n\n\t\t\t// Leaves is an array of Objects. 1 item = one leaf. Provides x and y for leaf position in the svg. Also gives details about its parent.\n\t\t\tlink = link\n\t\t\t\t.data(packageImports(leaves))\n\t\t\t\t.enter().append(\"path\")\n\t\t\t\t.attr(\"class\", \"link\")\n\t\t\t\t.attr(\"d\", d => line(d.line))\n\t\t\t\t.attr(\"fill\", \"none\")\n\t\t\t\t.attr(\"stroke\", \"black\")\n\t\t\t\t.attr(\"stroke-width\", d => linkStrokeScale(d.weight))\n\t\t\t\t.on('mouseover', tip_link.show)\n\t\t\t\t.on('mouseout', (event, d) => {\n\t\t\t\t\ttip_link.hide();\n\t\t\t\t\td3.select(event.target).attr(\"stroke\", \"black\");\n\t\t\t\t})\n\t\t\t\t.on('click', (event, d) => {\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t\n\n\t\t\tlabel = label\n\t\t\t\t.data(leaves)\n\t\t\t\t.enter().append(\"text\")\n\t\t\t\t.attr(\"class\", \"label\")\n\t\t\t\t.attr(\"dy\", \"0.31em\")\n\t\t\t\t.attr(\"transform\", function (d) { console.log(d);return \"rotate(\" + (d.x - 90) + \")translate(\" + (d.y + PADDING_LABEL + bubbleSizeScale(d.value)) + \",0)\" + (d.x < 90 || d.x > 270 ? \"rotate(90)\" : \"rotate(-90)\"); })\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t\t.text(function (d) { return d.data.name; });\n\n\t\t\td3.selectAll(\".tip-bubble\").remove()\n\t\t\tvar tip_bubble = d3Tip().attr('class', 'd3-tip tip-bubble')\n\t\t\t\t\t.offset((e, d) => {return [Math.sin(d.x / 180 * Math.PI) * bubbleSizeScale(d.value) - bubbleSizeScale(d.value) - 20, Math.cos(d.x / 180 * Math.PI) * bubbleSizeScale(d.value)];})\n\t\t\t\t\t.html(function(event, d) {\n\t\t\t\t\t\ttip_bubble.style(\"margin-left\", (parseFloat((d3.select(\".tip-bubble\").style(\"left\"))) - 960) / 4 + \"px\")\n\t\t\t\t\t\ttip_bubble.style(\"margin-top\", parseFloat((d3.select(\".tip-bubble\").style(\"top\"))) / 4 + \"px\")\n\t\t\t\t\t\treturn 'Count : ' + d.value;\n\t\t\t\t\t})\n\n\t\t\tsvg.call(tip_bubble);\n\n\t\t\tbubble = bubble\n\t\t\t\t.data(leaves)\n\t\t\t\t.enter().append(\"circle\")\n\t\t\t\t.attr(\"class\", \"bubble\")\n\t\t\t\t.attr(\"transform\", function (d) { return \"rotate(\" + (d.x - 90) + \")translate(\" + (d.y + PADDING_BUBBLE) + \",0)\" })\n\t\t\t\t.attr('r', d => bubbleSizeScale(d.value))\n\t\t\t\t.attr('stroke', 'black')\n\t\t\t\t.attr('fill', d => d.data.color)\n\t\t\t\t.style('opacity', .6)\n\t\t\t\t.on('mouseover', tip_bubble.show)\n\t\t\t\t.on('mouseout', tip_bubble.hide);\n\n\t\t// Lazily construct the package hierarchy from class names.\n\t\tfunction packageHierarchy(classes) {\n\t\t\tvar map = {};\n\n\t\t\tfunction find(id, data) {\n\t\t\t\tvar node = map[id], i;\n\t\t\t\tif (!node) {\n\t\t\t\t\tnode = map[id] = data || { id: id, children: [] };\n\t\t\t\t\tif (id.length) {\n\t\t\t\t\t\tnode.parent = find(id.substring(0, i = id.lastIndexOf(\".\")));\n\t\t\t\t\t\tnode.parent.children.push(node);\n\t\t\t\t\t\tnode.key = id.substring(i + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\n\t\t\tclasses.forEach(function (d) {\n\t\t\t\tfind(d.id, d);\n\t\t\t});\n\n\t\t\treturn d3.hierarchy(map[\"\"]);\n\t\t}\n\n\t\t// Return a list of imports for the given array of nodes.\n\t\tfunction packageImports(nodes) {\n\t\t\tvar map = {},\n\t\t\t\timports = [];\n\n\t\t\t// Compute a map from name to node.\n\t\t\tnodes.forEach(function (d) {\n\t\t\t\tmap[d.data.id] = d;\n\t\t\t});\n\n\t\t\t// For each import, construct a link from the source to target node.\n\t\t\tnodes.forEach(function (d) {\n\t\t\t\tif (d.data.imports) d.data.imports.forEach(function (i) {\n\t\t\t\t\timports.push({\"line\" : map[d.data.id].path(map[i.id]), \"weight\" : i.count, \"intersection\" : i.intersection});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn imports;\n\t\t}\n\t}, [state])\n\n\n\n\treturn (\n\t\t<div id=\"filterbundling\"></div>\n\t)\n}\n\n\n\nexport default FilterBundling;\n\n\n","import React, { useRef } from 'react';\nimport { styled } from '@mui/material/styles';\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\nimport Title from './Title'\nimport MyLineup from './MyLineup'\nimport FilterHeatmap from './FilterHeatmap'\nimport PCP3 from './PCP3'\nimport PHP from './PHP'\nimport BasicInfo from './BasicInfo'\nimport CanvasScatter from './CanvasScatter'\nimport TextCompare from './TextCompare'\nimport FilterBoxPlot from './FilterBoxPlot';\nimport { globalData, colorScaleMap, fieldList, lang } from './reducers/StaticData'\nimport FilterBundling from \"./FilterBundling\"\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport \"./css/legend.css\"\nimport { Divider } from '@mui/material';\n\nconst Item = styled(Paper)(({ theme }) => ({\n\t...theme.typography.body2,\n\tpadding: theme.spacing(1),\n\ttextAlign: 'center',\n\tcolor: theme.palette.text.secondary,\n}));\n\nconst metric_explain = {\n\t\"CORR\": \"Cosine Similarity\",\n\t\"BACK_ENG_CORR\": \"ENG Cosine \\n Similarity\",\n\t\"BACK_FRA_CORR\": 'FRA Cosine \\n Similarity',\n\t\"BACK_KOR_CORR\": 'KOR Cosine \\n Similarity',\n\t\"LENGTH_DIFF\": \"Length Ratio(R)\",\n\t\"TOKEN_LENGTH_DIFF\": \"Token Length \\n Ratio(R)\",\n\t\"ENG_BLEU\": \"ENG BLEU\",\n\t\"FRA_BLEU\": \"FRA BLEU\",\n\t\"KOR_BLEU\": \"KOR BLEU\",\n\t\"ENG_METEOR\": \"ENG METEOR\",\n\t\"FRA_METEOR\": \"FRA METEOR\",\n\t\"KOR_METEOR\": \"KOR METEOR\"\n}\n\n\nfunction Copyright(props) {\n  return (\n    <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" {...props}>\n      {'Copyright  SNU HCI Lab, Sebeom Park, Soohyun Lee in '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nfunction MetricLegend() {\n\tlet metric = fieldList.map(d => {\n\t\treturn (\n\t\t\t<div class=\"legend-element\" style={{ background: colorScaleMap[d](0.5), whiteSpace: 'pre-line' }}>\n\t\t\t\t<span>{metric_explain[d]}</span>\n\t\t\t</div>\n\t\t)\n\t})\n\treturn (\n\n\t\t<div class=\"legend-container\">\n\t\t\t<span>Metric : </span>\n\t\t\t{metric}\n\t\t</div>\n\t)\n}\n\nfunction getHeader() {\n\t\treturn (\n\t\t\t<pre style={{ letterSpacing:\"0px\" }}> VANT     Dataset : Web novel dataset      Source Language : English - Target Language : Korean    Total size of data : {globalData.length}</pre>\n\t\t)\n}\nfunction Dashboard2() {\n\tconst handleChange = (event, value) => {\n\t\twindow.location.href = value\n\t};\n\t// var ratioX = 0.8;//dev screensize echarts instance \n\t// document.body.style.width = '1920px';//dev screensize echarts instance \n\t// document.body.style.height = '1080px';//dev screensize echarts instance \n\t// document.body.style.transform = `scale(${ratioX},${ratioX})`;\n\t// document.body.style.transformOrigin = `center top`;\n\treturn (\n\t\t<Box sx={{ flexGrow: 1, width: 1920, height: 500, margin: 'auto', transform:'scale(0.8, 0.8)', transformOrigin:'center top'}}>\n\t\t\t<Grid container item spacing={1}>\n\n\t\t\t\t{/* Header */}\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<Item style={{ textAlign: 'left', paddingLeft: '20px', backgroundColor: \"#FFFFF0\" }}>\n\t\t\t\t\t\t<Title style={{ height: 70 }}>\n\t\t\t\t\t\t\t<div style={{ height: 60 }}>\n\t\t\t\t\t\t\t\t<div style={{ width: \"90%\", float: \"left\"}}>\n\t\t\t\t\t\t\t\t\t{getHeader()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style={{ marginTop: -10}}>\n\t\t\t\t\t\t\t\t{MetricLegend()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Title>\n\n\t\t\t\t\t</Item>\n\t\t\t\t</Grid>\n\n\t\t\t\t<Grid container item spacing={1}>\n\n\t\t\t\t\t<Grid item xs={12} xl={12}>\n\n\t\t\t\t\t\t<Grid container item spacing={1} >\n\t\t\t\t\t\t\t<Grid item container xs={10} xl={10} spacing={1}>\n\n\t\t\t\t\t\t\t\t<Grid item xs={12} xl={12}>\n\t\t\t\t\t\t\t\t\t<Item elevation={3}>\n\t\t\t\t\t\t\t\t\t\t<Title> Distribution View </Title>\n\t\t\t\t\t\t\t\t\t\t<Grid item container justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={3} xl={3}>\n\t\t\t\t\t\t\t\t\t\t\t\t<CanvasScatter />\n\t\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t\t<Divider orientation=\"vertical\" flexItem style={{marginLeft:\"-8px\"}} />\n\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={9} xl={9}>\n\t\t\t\t\t\t\t\t\t\t\t\t<PHP />\n\t\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item xs={3} xl={3}>\n\t\t\t\t\t\t\t\t\t<Item elevation={3}>\n\t\t\t\t\t\t\t\t\t\t<TextCompare />\n\t\t\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item xs={9} xl={9}>\n\t\t\t\t\t\t\t\t\t<Item elevation={3}>\n\t\t\t\t\t\t\t\t\t\t<MyLineup/>\n\t\t\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={2} xl={2} >\n\t\t\t\t\t\t\t\t<Item elevation={3}>\n\t\t\t\t\t\t\t\t\t<Title>Ruleset View </Title>\n\t\t\t\t\t\t\t\t\t<Typography variant=\"body1\">Ruleset Information</Typography>\n\t\t\t\t\t\t\t\t\t<FilterHeatmap />\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<Divider style={{marginTop:'-12px'}}/>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<Typography variant=\"body1\">Ruleset Status</Typography>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<FilterBoxPlot />\n\t\t\t\t\t\t\t\t\t<Divider/>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<Typography variant=\"body1\">Ruleset Relationship</Typography>\n\t\t\t\t\t\t\t\t\t<FilterBundling />\n\t\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\n\n\t\t\t\t</Grid>\n\n\t\t\t</Grid>\n\t\t\t<Copyright sx={{ pt: 4 }} />\n\t\t</Box>\n\t);\n}\nexport default Dashboard2\n","import React, { useEffect, useRef, useState, useContext } from 'react'\nimport { DataGrid } from '@mui/x-data-grid';\nimport { useParams } from \"react-router-dom\"\nimport { styled } from '@mui/material/styles';\n\nimport { UserDispatch, globalData } from \"./context/DataProvider\";\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Grid from '@mui/material/Grid';\nimport Title from './Title'\n\n\n\nconst Item = styled(Paper)(({ theme }) => ({\n  ...theme.typography.body2,\n  padding: theme.spacing(1),\n  textAlign: 'center',\n  color: theme.palette.text.secondary,\n}));\n\n\nconst columns = [\n  { field: 'id', headerName: 'ID' },\n  { field: 'CORR', headerName: 'CORR', width: 200 },\n  { field: 'BACK_ENG_CORR', headerName: 'BACK_ENG_CORR', width: 200 },\n  { field: 'BACK_FRA_CORR', headerName: 'BACK_FRA_CORR', width: 200 },\n  { field: 'ENG_BLEU', headerName: 'ENG_BLEU', width: 200 },\n  { field: 'FRA_BLEU', headerName: 'FRA_BLEU', width: 200 },\n  { field: 'ENG_METEOR', headerName: 'ENG_METEOR', width: 200 },\n  { field: 'FRA_METEOR', headerName: 'FRA_METEOR', width: 200 },\n\n];\n\nconst rows = [\n  { id: 1, lastName: 'Snow', firstName: 'Jon', age: 35 },\n  { id: 2, lastName: 'Lannister', firstName: 'Cersei', age: 42 },\n  { id: 3, lastName: 'Lannister', firstName: 'Jaime', age: 45 },\n  { id: 4, lastName: 'Stark', firstName: 'Arya', age: 16 },\n  { id: 5, lastName: 'Targaryen', firstName: 'Daenerys', age: null },\n  { id: 6, lastName: 'Melisandre', firstName: null, age: 150 },\n  { id: 7, lastName: 'Clifford', firstName: 'Ferrara', age: 44 },\n  { id: 8, lastName: 'Frances', firstName: 'Rossini', age: 36 },\n  { id: 9, lastName: 'Roxie', firstName: 'Harvey', age: 65 },\n];\n\nexport default function DataTable() {\n\n  const { id } = useParams();\n\n  const newSet = new Set(id.split(\",\"))\n  //console.log(newSet)\n  const rows = globalData.filter(d => {\n    return newSet.has('' + d.id)\n  })\n\n  const [eng, set_eng] = useState(\"\")\n  const [back_eng, set_back_eng] = useState(\"\")\n  const [fra, set_fra] = useState(\"\")\n  const [back_fra, set_back_fra] = useState(\"\")\n\n\n  // console.log(rows)\n  return (\n    <div style={{ height: 600, width: '80%' , margin : 'auto'}}>\n      <DataGrid\n        rows={rows}\n        columns={columns}\n        pageSize={100}\n        rowsPerPageOptions={[50]}\n        checkboxSelection\n        onRowClick={(d) => {\n          set_eng(globalData[d.id].ENG_SENTENCE)\n          set_back_eng(globalData[d.id].BACK_ENG_SENTENCE)\n          set_fra(globalData[d.id].FRA_SENTENCE)\n          set_back_fra(globalData[d.id].BACK_FRA_SENTENCE)\n          // set\n          // console.log(d)\n          // console.log(globalData[d.id].ENG_SENTENCE)\n          // console.log(globalData[d.id].BACK_ENG_SENTENCE)\n        }\n\n        }\n      />\n      <br />\n      <br />\n      <Grid container item spacing={3}>\n        <Grid container item spacing={2}>\n          <Grid item xs={6}>\n            <Title> English </Title>\n            <Item>\n              {eng}\n            </Item>\n          </Grid>\n          <Grid item xs={6}>\n            <Title> Back-English </Title>\n            <Item>\n            {back_eng}\n            </Item>\n          </Grid>\n        </Grid>\n\n        <Grid container item spacing={2}>\n          <Grid item xs={6}>\n            <Title> Freench </Title>\n            <Item>\n              {fra}\n            </Item>\n          </Grid>\n          <Grid item xs={6}>\n            <Title> Back-French </Title>\n            <Item>\n            {back_fra}\n            </Item>\n          </Grid>\n        </Grid>\n      </Grid>\n\n\n    </div>\n  );\n}\n","import React, { useEffect, useRef, useState, useContext } from 'react'\nimport { DataGrid } from '@mui/x-data-grid';\nimport { useParams } from \"react-router-dom\"\nimport { styled } from '@mui/material/styles';\nimport * as d3 from 'd3'\n// import { UserDispatch, globalData, fieldList, colorScaleMap } from \"./context/DataProvider\";\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Grid from '@mui/material/Grid';\nimport Title from './Title'\nimport \"./TextCompare.css\"\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport { globalData, fieldList, colorScaleMap } from './reducers/StaticData'\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { FixedSizeList, VariableSizeList } from 'react-window';\n\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\n\nfunction TextHeatmap() {\n\n    const svg_heatmap = useRef();\n    const ngrams = globalData[8279].ngram\n    const ngram_eng_original = ngrams.ngram_kor_original\n    const ngram_eng_back = ngrams.ngram_kor_back\n\n    const ngram_fra_original = ngrams.ngram_eng_original\n    const ngram_fra_back = ngrams.ngram_eng_back\n\n    const width = 600\n    const height = 5000\n    const box_height = 10\n    const box_width = 200\n\n    useEffect(() => {\n        let svg = d3.select(svg_heatmap.current).attr(\"width\", width).attr(\"height\", height)\n        function draw(id) {\n\n            const new_svg = svg.append(\"g\").attr(\"transform\",(d,i) =>{\n                return `translate(0, ${(box_height*2+10) * id})`\n            })\n\n            const eng_original = new_svg.append(\"g\")\n            const ngrams = globalData[id].ngram\n            const ngram_eng_original = ngrams.ngram_eng_original\n            const ngram_eng_back = ngrams.ngram_eng_back\n        \n            const ngram_fra_original = ngrams.ngram_fra_original\n            const ngram_fra_back = ngrams.ngram_fra_back\n\n            \n            const fill_scale = d3.scaleOrdinal().domain([0, 1, 2, 3, 4]).range([\"white\", \"LightGreen\", \"LightSeaGreen\", \"lightskyblue\", \"lightsalmon\"])\n            const eng_original_widthScale = d3.scaleLinear().domain([0, globalData[id].ENG_SENTENCE.length]).range([0, box_width])\n            \n            eng_original.selectAll(\"rect\").data(ngram_eng_original, d => d).join(\"rect\").attr(\"x\", (d, i) => {\n                var pos = 0;\n                for (let index = 0; index < i; index++) {\n                    pos += eng_original_widthScale(ngram_eng_original[index].token.length + 1)\n                }\n                return pos\n            }).attr(\"y\", 0).attr\n\n                (\"width\", d => eng_original_widthScale(d.token.length)).attr(\"height\", box_height).attr(\"fill\", d => fill_scale(d.n_gram))\n\n\n            const eng_back = new_svg.append(\"g\").attr(\"transform\", (d, i) => {\n                return `translate(0, ${box_height})`\n            })\n\n            const eng_back_widthScale = d3.scaleLinear().domain([0, globalData[id].BACK_ENG_SENTENCE.length]).range([0, box_width])\n\n            eng_back.selectAll(\"rect\").data(ngram_eng_back, d => d).join(\"rect\").attr(\"x\", (d, i) => {\n                var pos = 0;\n                for (let index = 0; index < i; index++) {\n                    pos += eng_back_widthScale(ngram_eng_back[index].token.length + 1)\n                }\n                return pos\n            }).attr(\"y\", 0).attr(\"width\", d => eng_back_widthScale(d.token.length)).attr(\"height\", box_height).attr(\"fill\", d => fill_scale(d.n_gram))\n\n\n\n        }\n\n        for(let i =0;i<300;i++)\n            draw(i)\n\n    }, [])\n\n    return (\n        <div>\n            <svg ref={svg_heatmap}>\n\n            </svg>\n        </div>\n    )\n}\n\nexport default TextHeatmap","import './App.css';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\"\nimport Dashboard from './Dashboard'\nimport FilterHeatmap from \"./FilterHeatmap\"\nimport PCP from \"./PCP3\"\nimport PHP from \"./PHP\"\nimport Detail from \"./Detail\"\nimport CanvasScatter from './CanvasScatter';\nimport MetricCard from './MetricCard';\nimport BasicInfo from \"./BasicInfo\"\nimport TextCompare from \"./TextCompare\"\nimport FilterBoxPlot from \"./FilterBoxPlot\"\nimport TextHeatmap from \"./TextHeatmap\"\n// import ColorPicker from \"./removed/ColorPicker\"\nfunction App() {\n  return (\n  \n    <div>\n        <BrowserRouter>\n          <Switch>\n            <Route exact={true} path='/scatter' component={CanvasScatter} />\n            <Route exact={true} path={['/', '/KOR', '/FRA']} component={Dashboard} />\n            <Route path='/detail/:id/' component={Detail} />\n            <Route path='/heatmap' component={FilterHeatmap} />\n            <Route path='/pcp' component={PCP} />\n\t\t\t<Route path='/php' component={PHP} />\n            <Route path='/detail/:id/' component={Detail} />\n            <Route path='/basic_info' component={BasicInfo} />\n            <Route path='/text_compare' component={TextCompare} />\n            <Route path='/filter_box' component={FilterBoxPlot} />\n            <Route path='/text_heatmap' component={TextHeatmap} />\n            {/* <Route path='/ColorPicker' component={ColorPicker} /> */}\n\n            \n          </Switch>\n        </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import { combineReducers } from \"redux\";\n// import counter from \"./counter\";\nimport filter from \"./filter\";\nimport text_compare from \"./text_compare\";\nimport weight from \"./weight\";\nimport lineup_filter from \"./lineup_filter\";\nimport php_lineup from \"./php_lineup\";\nimport lineup_to_php from './lineup_to_php'\nimport mouseover_to_text from './mouseover_to_text'\n//  reducer   reducer   .\n// store    1.\nconst rootReducer = combineReducers({\n  filter,\n  text_compare,\n  weight,\n  lineup_filter,\n  php_lineup,\n  lineup_to_php,\n  mouseover_to_text\n});\n\nexport default rootReducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport { Provider } from \"react-redux\";\n\nimport logger from \"redux-logger\";\n\nimport { composeWithDevTools } from \"redux-devtools-extension\";\n\nimport App from './App';\nimport rootReducer from \"./reducers\";\n\nconst enhancer =\n  process.env.NODE_ENV === \"production\"\n    ? compose(applyMiddleware())\n    : composeWithDevTools(applyMiddleware(logger));\n\nexport const store = createStore(rootReducer, enhancer);\n\nconsole.log(store.getState());\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals();\n"],"sourceRoot":""}